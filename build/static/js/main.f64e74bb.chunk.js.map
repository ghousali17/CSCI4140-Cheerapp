{"version":3,"sources":["store/utility.js","store/reducers/auth.js","store/actions/actionTypes.js","store/reducers/nav.js","store/reducers/message.js","hoc/hoc.js","settings.js","websocket.js","store/actions/auth.js","store/actions/message.js","components/Contact.js","containers/Sidepanel.js","store/actions/nav.js","containers/Profile.js","containers/Form.js","containers/Popup.js","containers/Chat.js","containers/Login.js","containers/Signup.js","containers/ChatHolder.js","containers/Home.js","components/Form.js","containers/Profilepage.js","routes.js","containers/Layout.js","App.js","index.js"],"names":["updateObject","oldObject","updatedProperties","Object","objectSpread","initialState","token","username","error","loading","reducer","state","arguments","length","undefined","action","type","authStart","authSuccess","authFail","authLogout","showAddChatPopup","openAddChatPopup","closeAddChatPopup","messages","chats","concat","toConsumableArray","message","addMessage","reverse","setMessages","setChats","Hoc","props","children","HOST_URL","SOCKET_URL","WebSocketService","classCallCheck","this","callbacks","socketRef","instance","chatUrl","_this","path","WebSocket","onopen","console","log","onmessage","e","socketNewMessage","data","onerror","onclose","connect","close","parsedData","JSON","parse","command","keys","chatId","sendMessage","from","content","messagesCallback","newMessageCallback","send","stringify","err","readyState","WebSocketInstance","getInstance","logout","localStorage","removeItem","checkAuthTimeout","expirationTime","dispatch","setTimeout","authLogin","password","axios","post","then","res","key","expirationDate","Date","getTime","setItem","catch","authSignup","email","password1","password2","authCheckState","getItem","getUserChatsSuccess","getUserChats","defaults","xsrfHeaderName","xsrfCookieName","headers","Content-Type","Authorization","get","Contact","react_default","a","createElement","react_router_dom","to","chatURL","style","color","className","status","src","picURL","alt","name","antIcon","icon","fontSize","spin","Sidepanel","loginForm","changeForm","setState","authenticate","preventDefault","login","target","value","signup","component","waitForAuthDetails","addChat","_this2","activeChats","map","c","components_Contact","id","indicator","isAuthenticated","userName","react_router","onClick","aria-hidden","React","Component","auth","actions","messageActions","Profile","possibleConstructorReturn","getPrototypeOf","call","onTryAutoSignup","hoc","FormItem","Form","Item","HorizontalAddChatForm","usernames","handleChange","handleSubmit","form","validateFields","values","combined","participants","history","push","fieldsError","_this$props$form","getFieldDecorator","getFieldsError","getFieldError","userNameError","isFieldTouched","es_form","layout","onSubmit","validateStatus","help","rules","required","es_select","mode","width","placeholder","onChange","es_button","htmlType","disabled","some","field","AddChatForm","create","withRouter","AddChatModal","modal","centered","footer","visible","isVisible","onCancel","Chat","messageChangeHandler","event","sendMessageHandler","messageObject","match","params","chatID","newChatMessage","renderTimestamp","timestamp","timeDiff","Math","round","renderMessages","currentUser","i","arr","marginBottom","author","scrollToBottom","messagesEnd","scrollIntoView","behavior","initialiseChat","waitForSocketConnection","fetchMessages","callback","newProps","_this3","disconnect","_this4","containers_Sidepanel","Popup","containers_Profile","float","clear","ref","el","NormalLoginForm","onAuth","errorMessage","Login_FormItem","input","prefix","marginRight","WrappedNormalLoginForm","RegistrationForm","confirmDirty","validateFieldsAndScroll","confirm","handleConfirmBlur","compareToFirstPassword","rule","getFieldValue","validateToNextPassword","force","Signup_FormItem","validator","onBlur","WrappedRegistrationForm","ChatHolder","addCallbacks","bind","assertThisInitialized","nav","authenticated","Home","background","padding","card","title","bordered","CustomForm","handleFormSubmit","_callee","requestType","profileID","postObj","regenerator_default","wrap","_context","prev","next","bio","elements","location","put","stop","Form_FormItem","label","btnText","ProfilePage","userprofile","components_Form","assign","BaseRouter","exact","WrappedNormalSignupForm","Header","Layout","Content","Footer","CustomLayout","menu","theme","defaultSelectedKeys","lineHeight","breadcrumb","margin","minHeight","textAlign","App","routes","banan","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","rootReducer","combineReducers","authReducer","navReducer","messageReducer","createStore","applyMiddleware","thunk","configureStore","app","es","src_App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f64e74bb.chunk.js","sourcesContent":["export const updateObject = (oldObject, updatedProperties) => {\n  return {\n    ...oldObject,\n    ...updatedProperties\n  };\n};\n","import * as actionTypes from \"../actions/actionTypes\";\nimport { updateObject } from \"../utility\";\n\nconst initialState = {\n  token: null,\n  username: null,\n  error: null,\n  loading: false\n};\n\nconst authStart = (state, action) => {\n  return updateObject(state, {\n    error: null,\n    loading: true\n  });\n};\n\nconst authSuccess = (state, action) => {\n  return updateObject(state, {\n    token: action.token,\n    username: action.username,\n    error: null,\n    loading: false\n  });\n};\n\nconst authFail = (state, action) => {\n  return updateObject(state, {\n    error: action.error,\n    loading: false\n  });\n};\n\nconst authLogout = (state, action) => {\n  return updateObject(state, {\n    token: null,\n    username: null\n  });\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.AUTH_START:\n      return authStart(state, action);\n    case actionTypes.AUTH_SUCCESS:\n      return authSuccess(state, action);\n    case actionTypes.AUTH_FAIL:\n      return authFail(state, action);\n    case actionTypes.AUTH_LOGOUT:\n      return authLogout(state, action);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","export const AUTH_START = \"AUTH_START\";\nexport const AUTH_SUCCESS = \"AUTH_SUCCESS\";\nexport const AUTH_FAIL = \"AUTH_FAIL\";\nexport const AUTH_LOGOUT = \"AUTH_LOGOUT\";\nexport const OPEN_ADD_CHAT_POPUP = \"OPEN_ADD_CHAT_POPUP\";\nexport const CLOSE_ADD_CHAT_POPUP = \"CLOSE_ADD_CHAT_POPUP\";\nexport const ADD_MESSAGE = \"ADD_MESSAGE\";\nexport const SET_MESSAGES = \"SET_MESSAGES\";\nexport const GET_CHATS_SUCCESS = \"GET_CHATS_SUCCESS\";\n","import * as actionTypes from \"../actions/actionTypes\";\nimport { updateObject } from \"../utility\";\n\nconst initialState = {\n  showAddChatPopup: false\n};\n\nconst openAddChatPopup = (state, action) => {\n  return updateObject(state, { showAddChatPopup: true });\n};\n\nconst closeAddChatPopup = (state, action) => {\n  return updateObject(state, { showAddChatPopup: false });\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.OPEN_ADD_CHAT_POPUP:\n      return openAddChatPopup(state, action);\n    case actionTypes.CLOSE_ADD_CHAT_POPUP:\n      return closeAddChatPopup(state, action);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import * as actionTypes from \"../actions/actionTypes\";\nimport { updateObject } from \"../utility\";\n\nconst initialState = {\n  messages: [],\n  chats: []\n};\n\nconst addMessage = (state, action) => {\n  return updateObject(state, {\n    messages: [...state.messages, action.message]\n  });\n};\n\nconst setMessages = (state, action) => {\n  return updateObject(state, {\n    messages: action.messages.reverse()\n  });\n};\n\nconst setChats = (state, action) => {\n  return updateObject(state, {\n    chats: action.chats\n  });\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.ADD_MESSAGE:\n      return addMessage(state, action);\n    case actionTypes.SET_MESSAGES:\n      return setMessages(state, action);\n    case actionTypes.GET_CHATS_SUCCESS:\n      return setChats(state, action);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","const Hoc = props => props.children;\n\nexport default Hoc;\n","let DEBUG = false;\nlet HOST_URL = \"https://cheerapp4140.herokuapp.com/\";\nlet SOCKET_URL = \"wss://cheerapp4140.herokuapp.com/\";\nif (DEBUG) {\n  HOST_URL = \"http://127.0.0.1:8000\";\n  SOCKET_URL = \"ws://127.0.0.1:8000\";\n}\n\nexport { HOST_URL, SOCKET_URL };\n","import { SOCKET_URL } from \"./settings\";\n\nclass WebSocketService {\n  static instance = null;\n  callbacks = {};\n\n  static getInstance() {\n    if (!WebSocketService.instance) {\n      WebSocketService.instance = new WebSocketService();\n    }\n    return WebSocketService.instance;\n  }\n\n  constructor() {\n    this.socketRef = null;\n  }\n\n  connect(chatUrl) {\n    const path = `${SOCKET_URL}/ws/chat/${chatUrl}/`;\n    this.socketRef = new WebSocket(path);\n    this.socketRef.onopen = () => {\n      console.log(\"WebSocket open\");\n    };\n    this.socketRef.onmessage = e => {\n      this.socketNewMessage(e.data);\n    };\n    this.socketRef.onerror = e => {\n      console.log(e.message);\n    };\n    this.socketRef.onclose = () => {\n      console.log(\"WebSocket closed let's reopen\");\n      this.connect();\n    };\n  }\n\n  disconnect() {\n    this.socketRef.close();\n  }\n\n  socketNewMessage(data) {\n    const parsedData = JSON.parse(data);\n    const command = parsedData.command;\n    if (Object.keys(this.callbacks).length === 0) {\n      return;\n    }\n    if (command === \"messages\") {\n      this.callbacks[command](parsedData.messages);\n    }\n    if (command === \"new_message\") {\n      this.callbacks[command](parsedData.message);\n    }\n  }\n\n  fetchMessages(username, chatId) {\n    this.sendMessage({\n      command: \"fetch_messages\",\n      username: username,\n      chatId: chatId\n    });\n  }\n\n  newChatMessage(message) {\n    this.sendMessage({\n      command: \"new_message\",\n      from: message.from,\n      message: message.content,\n      chatId: message.chatId\n    });\n  }\n\n  addCallbacks(messagesCallback, newMessageCallback) {\n    this.callbacks[\"messages\"] = messagesCallback;\n    this.callbacks[\"new_message\"] = newMessageCallback;\n  }\n\n  sendMessage(data) {\n    try {\n      this.socketRef.send(JSON.stringify({ ...data }));\n    } catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  state() {\n    return this.socketRef.readyState;\n  }\n}\n\nconst WebSocketInstance = WebSocketService.getInstance();\n\nexport default WebSocketInstance;\n","import axios from \"axios\";\nimport * as actionTypes from \"./actionTypes\";\nimport { HOST_URL } from \"../../settings\";\n\nexport const authStart = () => {\n  return {\n    type: actionTypes.AUTH_START\n  };\n};\n\nexport const authSuccess = (username, token) => {\n  return {\n    type: actionTypes.AUTH_SUCCESS,\n    token: token,\n    username: username\n  };\n};\n\nexport const authFail = error => {\n  return {\n    type: actionTypes.AUTH_FAIL,\n    error: error\n  };\n};\n\nexport const logout = () => {\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"username\");\n  localStorage.removeItem(\"expirationDate\");\n  return {\n    type: actionTypes.AUTH_LOGOUT\n  };\n};\n\nexport const checkAuthTimeout = expirationTime => {\n  return dispatch => {\n    setTimeout(() => {\n      dispatch(logout());\n    }, expirationTime * 1000);\n  };\n};\n\nexport const authLogin = (username, password) => {\n  return dispatch => {\n    dispatch(authStart());\n    axios\n      .post(`${HOST_URL}/rest-auth/login/`, {\n        username: username,\n        password: password\n      })\n      .then(res => {\n        const token = res.data.key;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"username\", username);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        dispatch(authSuccess(username, token));\n        dispatch(checkAuthTimeout(3600));\n      })\n      .catch(err => {\n        dispatch(authFail(err));\n      });\n  };\n};\n\nexport const authSignup = (username, email, password1, password2) => {\n  return dispatch => {\n    dispatch(authStart());\n    axios\n      .post(`${HOST_URL}/rest-auth/registration/`, {\n        username: username,\n        email: email,\n        password1: password1,\n        password2: password2\n      })\n      .then(res => {\n        const token = res.data.key;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"username\", username);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        dispatch(authSuccess(username, token));\n        dispatch(checkAuthTimeout(3600));\n      })\n      .catch(err => {\n        dispatch(authFail(err));\n      });\n  };\n};\n\nexport const authCheckState = () => {\n  return dispatch => {\n    const token = localStorage.getItem(\"token\");\n    const username = localStorage.getItem(\"username\");\n    if (token === undefined) {\n      dispatch(logout());\n    } else {\n      const expirationDate = new Date(localStorage.getItem(\"expirationDate\"));\n      if (expirationDate <= new Date()) {\n        dispatch(logout());\n      } else {\n        dispatch(authSuccess(username, token));\n        dispatch(\n          checkAuthTimeout(\n            (expirationDate.getTime() - new Date().getTime()) / 1000\n          )\n        );\n      }\n    }\n  };\n};\n","import axios from \"axios\";\nimport * as actionTypes from \"./actionTypes\";\nimport { HOST_URL } from \"../../settings\";\n\nexport const addMessage = message => {\n  return {\n    type: actionTypes.ADD_MESSAGE,\n    message: message\n  };\n};\n\nexport const setMessages = messages => {\n  return {\n    type: actionTypes.SET_MESSAGES,\n    messages: messages\n  };\n};\n\nconst getUserChatsSuccess = chats => {\n  return {\n    type: actionTypes.GET_CHATS_SUCCESS,\n    chats: chats\n  };\n};\n\nexport const getUserChats = (username, token) => {\n  return dispatch => {\n    axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Token ${token}`\n    };\n    axios\n      .get(`${HOST_URL}/chat/?username=${username}`)\n      .then(res => dispatch(getUserChatsSuccess(res.data)));\n  };\n};\n\nexport const getUserProfile = (token) => {\n  return dispatch => {\n    axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Token ${token}`\n    };\n    axios\n      .get(`${HOST_URL}/profile`)\n      .then(res => dispatch(getUserChatsSuccess(res.data)));\n  };\n\n\n}","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nconst Contact = props => (\n  <NavLink to={`chat${props.chatURL}`} style={{ color: \"#fff\" }}>\n    <li className=\"contact\">\n      <div className=\"wrap\">\n        <span className={`contact-status ${props.status}`} />\n        <img src={props.picURL} alt=\"\" />\n        <div className=\"meta\">\n          <p className=\"name\">{props.name}</p>\n          {/* <p className=\"preview\">You just got LITT up, Mike.</p> */}\n        </div>\n      </div>\n    </li>\n  </NavLink>\n);\n\nexport default Contact;\n","import React from \"react\";\nimport { Spin, Icon } from \"antd\";\nimport {Redirect} from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport * as actions from \"../store/actions/auth\";\nimport * as navActions from \"../store/actions/nav\";\nimport * as messageActions from \"../store/actions/message\";\nimport Contact from \"../components/Contact\";\n\nconst antIcon = <Icon type=\"loading\" style={{ fontSize: 24 }} spin />;\n\nclass Sidepanel extends React.Component {\n  state = {\n    loginForm: true\n  };\n\n  waitForAuthDetails() {\n    const component = this;\n    setTimeout(function() {\n      if (\n        component.props.token !== null &&\n        component.props.token !== undefined\n      ) {\n        component.props.getUserChats(\n          component.props.username,\n          component.props.token\n        );\n        return;\n      } else {\n        console.log(\"waiting for authentication details...\");\n        component.waitForAuthDetails();\n      }\n    }, 100);\n  }\n\n  componentDidMount() {\n    this.waitForAuthDetails();\n  }\n\n  openAddChatPopup() {\n    this.props.addChat();\n  }\n\n  changeForm = () => {\n    this.setState({ loginForm: !this.state.loginForm });\n  };\n\n  authenticate = e => {\n    e.preventDefault();\n    if (this.state.loginForm) {\n      this.props.login(e.target.username.value, e.target.password.value);\n    } else {\n      this.props.signup(\n        e.target.username.value,\n        e.target.email.value,\n        e.target.password.value,\n        e.target.password2.value\n      );\n    }\n  };\n\n  render() {\n    let activeChats = this.props.chats.map(c => {\n      return (\n        <Contact\n          key={c.id}\n          name=\"Harvey Specter\"\n          picURL=\"http://emilcarlsson.se/assets/louislitt.png\"\n          status=\"busy\"\n          chatURL={`/${c.id}`}\n        />\n      );\n    });\n    return (\n      <div id=\"sidepanel\">\n        <div id=\"profile\">\n          <div className=\"wrap\">\n            <img\n              id=\"profile-img\"\n              src=\"http://emilcarlsson.se/assets/mikeross.png\"\n              className=\"online\"\n              alt=\"\"\n            />\n          \n            <div id=\"expanded\">\n              {\n                this.props.loading ? (\n                <Spin indicator={antIcon} />\n              ) : this.props.isAuthenticated ? (\n\n              <h1>{this.props.userName}</h1>\n\n\n              ) \n\n\n\n\n                : (      <Redirect to=\"/\" />)\n            }\n\n            </div>\n          </div>\n        </div>\n        <div id=\"contacts\">\n        <h1> Contacts</h1>\n          <ul>{activeChats}</ul>\n        </div>\n        <div id=\"bottom-bar\">\n          <button id=\"addChat\" onClick={() => this.openAddChatPopup()}>\n            <i className=\"fa fa-user-plus fa-fw\" aria-hidden=\"true\" />\n            <span>Create chat</span>\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null,\n    loading: state.auth.loading,\n    token: state.auth.token,\n    username: state.auth.username,\n    chats: state.message.chats\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    login: (userName, password) =>\n      dispatch(actions.authLogin(userName, password)),\n    logout: () => dispatch(actions.logout()),\n    signup: (username, email, password1, password2) =>\n      dispatch(actions.authSignup(username, email, password1, password2)),\n    addChat: () => dispatch(navActions.openAddChatPopup()),\n    getUserChats: (username, token) =>\n      dispatch(messageActions.getUserChats(username, token))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Sidepanel);\n","import * as actionTypes from \"./actionTypes\";\n\nexport const openAddChatPopup = () => {\n  return {\n    type: actionTypes.OPEN_ADD_CHAT_POPUP\n  };\n};\n\nexport const closeAddChatPopup = () => {\n  return {\n    type: actionTypes.CLOSE_ADD_CHAT_POPUP\n  };\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport Hoc from \"../hoc/hoc\";\nimport * as actions from \"../store/actions/auth\";\nclass Profile extends React.Component {\n  componentDidMount() {\n    this.props.onTryAutoSignup();\n  }\n  constructor(props) {\n    super(props);\n    this.props.onTryAutoSignup();\n    \n  }\n\n  render() {\n    //if (this.props.token === null) {\n      //return <Redirect to=\"/\" />;\n    //}\n    return (\n      <div className=\"contact-profile\">\n        {this.props.username !== null ? (\n          <Hoc>\n            <img src=\"http://emilcarlsson.se/assets/harveyspecter.png\" alt=\"\" />\n            <p>{this.props.username}</p>\n            <div className=\"social-media\">\n              <i className=\"fa fa-facebook\" aria-hidden=\"true\" />\n              <i className=\"fa fa-twitter\" aria-hidden=\"true\" />\n              <i className=\"fa fa-instagram\" aria-hidden=\"true\" />\n            </div>\n          </Hoc>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    username: state.auth.username,\n    token: state.auth.token\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState())\n    };\n};\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Profile);\n","import React from \"react\";\nimport { Form, Button, Select } from \"antd\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport * as navActions from \"../store/actions/nav\";\nimport * as messageActions from \"../store/actions/message\";\nimport { HOST_URL } from \"../settings\";\n\nconst FormItem = Form.Item;\n\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nclass HorizontalAddChatForm extends React.Component {\n  state = {\n    usernames: [],\n    error: null\n  };\n\n  handleChange = value => {\n    this.setState({\n      usernames: value\n    });\n  };\n\n  componentDidMount() {\n    this.props.form.validateFields();\n  }\n\n  handleSubmit = e => {\n    const { usernames } = this.state;\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        const combined = [...usernames, this.props.username];\n        axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n        axios.defaults.xsrfCookieName = \"csrftoken\";\n        axios.defaults.headers = {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${this.props.token}`\n        };\n        axios\n          .post(`${HOST_URL}/chat/create/`, {\n            messages: [],\n            participants: combined\n          })\n          .then(res => {\n            this.props.history.push(`/${res.data.id}`);\n            this.props.closeAddChatPopup();\n            this.props.getUserChats(this.props.username, this.props.token);\n          })\n          .catch(err => {\n            console.error(err);\n            this.setState({\n              error: err\n            });\n          });\n      }\n    });\n  };\n\n  render() {\n    const {\n      getFieldDecorator,\n      getFieldsError,\n      getFieldError,\n      isFieldTouched\n    } = this.props.form;\n\n    const userNameError =\n      isFieldTouched(\"userName\") && getFieldError(\"userName\");\n    return (\n      <Form layout=\"inline\" onSubmit={this.handleSubmit}>\n        {this.state.error ? `${this.state.error}` : null}\n        <FormItem\n          validateStatus={userNameError ? \"error\" : \"\"}\n          help={userNameError || \"\"}\n        >\n          {getFieldDecorator(\"userName\", {\n            rules: [\n              {\n                required: true,\n                message:\n                  \"Please input the username of the person you want to chat with\"\n              }\n            ]\n          })(\n            <Select\n              mode=\"tags\"\n              style={{ width: \"100%\" }}\n              placeholder=\"Tags Mode\"\n              onChange={this.handleChange}\n            >\n              {[]}\n            </Select>\n          )}\n        </FormItem>\n        <FormItem>\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            disabled={hasErrors(getFieldsError())}\n          >\n            Start a chat\n          </Button>\n        </FormItem>\n      </Form>\n    );\n  }\n}\n\nconst AddChatForm = Form.create()(HorizontalAddChatForm);\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token,\n    username: state.auth.username\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    closeAddChatPopup: () => dispatch(navActions.closeAddChatPopup()),\n    getUserChats: (username, token) =>\n      dispatch(messageActions.getUserChats(username, token))\n  };\n};\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(AddChatForm)\n);\n","import React from \"react\";\nimport { Modal } from \"antd\";\nimport Form from \"./Form\";\n\nclass AddChatModal extends React.Component {\n  render() {\n    return (\n      <Modal\n        centered\n        footer={null}\n        visible={this.props.isVisible}\n        onCancel={this.props.close}\n      >\n        <Form />\n      </Modal>\n    );\n  }\n}\n\nexport default AddChatModal;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport WebSocketInstance from \"../websocket\";\nimport Hoc from \"../hoc/hoc\";\nimport Sidepanel from \"../containers/Sidepanel\";\nimport Profile from \"../containers/Profile\";\nimport AddChatModal from \"../containers/Popup\";\n\nclass Chat extends React.Component {\n  state = { message: \"\" };\n\n  initialiseChat() {\n    this.waitForSocketConnection(() => {\n      WebSocketInstance.fetchMessages(\n        this.props.username,\n        this.props.match.params.chatID\n      );\n    });\n    WebSocketInstance.connect(this.props.match.params.chatID);\n  }\n\n  constructor(props) {\n    super(props);\n    this.initialiseChat();\n  }\n\n  waitForSocketConnection(callback) {\n    const component = this;\n    setTimeout(function() {\n      if (WebSocketInstance.state() === 1) {\n        console.log(\"Connection is made\");\n        callback();\n        return;\n      } else {\n        console.log(\"wait for connection...\");\n        component.waitForSocketConnection(callback);\n      }\n    }, 100);\n  }\n\n  messageChangeHandler = event => {\n    this.setState({ message: event.target.value });\n  };\n\n  sendMessageHandler = e => {\n    e.preventDefault();\n    const messageObject = {\n      from: this.props.username,\n      content: this.state.message,\n      chatId: this.props.match.params.chatID\n    };\n    WebSocketInstance.newChatMessage(messageObject);\n    this.setState({ message: \"\" });\n  };\n\n  renderTimestamp = timestamp => {\n    let prefix = \"\";\n    const timeDiff = Math.round(\n      (new Date().getTime() - new Date(timestamp).getTime()) / 60000\n    );\n    if (timeDiff < 1) {\n      // less than one minute ago\n      prefix = \"just now...\";\n    } else if (timeDiff < 60 && timeDiff > 1) {\n      // less than sixty minutes ago\n      prefix = `${timeDiff} minutes ago`;\n    } else if (timeDiff < 24 * 60 && timeDiff > 60) {\n      // less than 24 hours ago\n      prefix = `${Math.round(timeDiff / 60)} hours ago`;\n    } else if (timeDiff < 31 * 24 * 60 && timeDiff > 24 * 60) {\n      // less than 7 days ago\n      prefix = `${Math.round(timeDiff / (60 * 24))} days ago`;\n    } else {\n      prefix = `${new Date(timestamp)}`;\n    }\n    return prefix;\n  };\n\n  renderMessages = messages => {\n    const currentUser = this.props.username;\n    return messages.map((message, i, arr) => (\n      <li\n        key={message.id}\n        style={{ marginBottom: arr.length - 1 === i ? \"300px\" : \"15px\" }}\n        className={message.author === currentUser ? \"sent\" : \"replies\"}\n      >\n        <img\n          src=\"http://emilcarlsson.se/assets/mikeross.png\"\n          alt=\"profile-pic\"\n        />\n        <p>\n          {message.content}\n          <br />\n          <small>{this.renderTimestamp(message.timestamp)}</small>\n        </p>\n      </li>\n    ));\n  };\n\n  scrollToBottom = () => {\n    this.messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  componentDidMount() {\n    this.scrollToBottom();\n  }\n\n  componentDidUpdate() {\n    this.scrollToBottom();\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (this.props.match.params.chatID !== newProps.match.params.chatID) {\n      WebSocketInstance.disconnect();\n      this.waitForSocketConnection(() => {\n        WebSocketInstance.fetchMessages(\n          this.props.username,\n          newProps.match.params.chatID\n        );\n      });\n      WebSocketInstance.connect(newProps.match.params.chatID);\n    }\n  }\n\n  render() {\n    return (\n    <div id=\"frame\">\n     <Sidepanel />\n    <div className=\"content\">\n      <AddChatModal\n              isVisible={this.props.showAddChatPopup}\n              close={() => this.props.closeAddChatPopup()}\n            />\n      <Profile {...this.props}/>\n      <Hoc>\n        <div className=\"messages\">\n          <ul id=\"chat-log\">\n            {this.props.messages && this.renderMessages(this.props.messages)}\n            <div\n              style={{ float: \"left\", clear: \"both\" }}\n              ref={el => {\n                this.messagesEnd = el;\n              }}\n            />\n          </ul>\n        </div>\n        <div className=\"message-input\">\n          <form onSubmit={this.sendMessageHandler}>\n            <div className=\"wrap\">\n              <input\n                onChange={this.messageChangeHandler}\n                value={this.state.message}\n                required\n                id=\"chat-message-input\"\n                type=\"text\"\n                placeholder=\"Write your message...\"\n              />\n              <i className=\"fa fa-paperclip attachment\" aria-hidden=\"true\" />\n              <button id=\"chat-message-submit\" className=\"submit\">\n                <i className=\"fa fa-paper-plane\" aria-hidden=\"true\" />\n              </button>\n            </div>\n          </form>\n        </div>\n      </Hoc>\n      </div>\n    </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    username: state.auth.username,\n    messages: state.message.messages,\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(Chat);\n","import React from 'react';\nimport { Form, Icon, Input, Button, Spin } from 'antd';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { Redirect } from \"react-router-dom\";\nimport * as actions from '../store/actions/auth';\n\nconst FormItem = Form.Item;\nconst antIcon = <Icon type=\"loading\" style={{ fontSize: 24 }} spin />;\n\n\nclass NormalLoginForm extends React.Component {\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.props.onAuth(values.userName, values.password);\n        console.log(this.props.error)\n        //this.props.history.push('/');\n      }\n    });\n  }\n\n  render() {\n    let errorMessage = null;\n    if (this.props.error) {\n        errorMessage = (\n            <p color=\"red\">Invalid Username or password</p>\n        );\n    }\n\n    const { getFieldDecorator } = this.props.form;\n     if (this.props.isAuthenticated) {\n      return (<Redirect to=\"/\" />);\n    }else{\n        return (\n        <div>\n            {errorMessage}\n            {\n                this.props.loading ?\n\n                <Spin indicator={antIcon} />\n\n                :\n\n                <Form onSubmit={this.handleSubmit} className=\"login-form\">\n\n                    <FormItem>\n                    {getFieldDecorator('userName', {\n                        rules: [{ required: true, message: 'Please input your username!' }],\n                    })(\n                        <Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Username\" />\n                    )}\n                    </FormItem>\n\n                    <FormItem>\n                    {getFieldDecorator('password', {\n                        rules: [{ required: true, message: 'Please input your Password!' }],\n                    })(\n                        <Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"Password\" />\n                    )}\n                    </FormItem>\n\n                    <FormItem>\n                    <Button type=\"primary\" htmlType=\"submit\" style={{marginRight: '10px'}}>\n                        Login\n                    </Button>\n                    Or \n                    <NavLink \n                        style={{marginRight: '10px'}} \n                        to='/signup/'> signup\n                    </NavLink>\n                    </FormItem>\n                </Form>\n            }\n      </div>\n    );}\n    \n  }\n}\n\nconst WrappedNormalLoginForm = Form.create()(NormalLoginForm);\n\nconst mapStateToProps = (state) => {\n    return {\n        loading: state.loading,\n        error: state.error,\n        isAuthenticated: state.token\n    }\n}\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onAuth: (username, password) => dispatch(actions.authLogin(username, password)) \n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WrappedNormalLoginForm);","import React from 'react';\nimport { Form, Input, Icon, Button } from 'antd';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport * as actions from '../store/actions/auth';\n\nconst FormItem = Form.Item;\n\nclass RegistrationForm extends React.Component {\n  state = {\n    confirmDirty: false,\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        this.props.onAuth(\n            values.userName,\n            values.email,\n            values.password,\n            values.confirm\n        );\n        this.props.history.push('/');\n      }\n    });\n  }\n\n  handleConfirmBlur = (e) => {\n    const value = e.target.value;\n    this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n  }\n\n  compareToFirstPassword = (rule, value, callback) => {\n    const form = this.props.form;\n    if (value && value !== form.getFieldValue('password')) {\n      callback('Two passwords that you enter is inconsistent!');\n    } else {\n      callback();\n    }\n  }\n\n  validateToNextPassword = (rule, value, callback) => {\n    const form = this.props.form;\n    if (value && this.state.confirmDirty) {\n      form.validateFields(['confirm'], { force: true });\n    }\n    callback();\n  }\n\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n\n    return (\n      <Form onSubmit={this.handleSubmit}>\n        \n        <FormItem>\n            {getFieldDecorator('userName', {\n                rules: [{ required: true, message: 'Please input your username!' }],\n            })(\n                <Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Username\" />\n            )}\n        </FormItem>\n        \n        <FormItem>\n          {getFieldDecorator('email', {\n            rules: [{\n              type: 'email', message: 'The input is not valid E-mail!',\n            }, {\n              required: true, message: 'Please input your E-mail!',\n            }],\n          })(\n            <Input prefix={<Icon type=\"mail\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Email\" />\n          )}\n        </FormItem>\n\n        <FormItem>\n          {getFieldDecorator('password', {\n            rules: [{\n              required: true, message: 'Please input your password!',\n            }, {\n              validator: this.validateToNextPassword,\n            }],\n          })(\n            <Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"Password\" />\n          )}\n        </FormItem>\n\n        <FormItem>\n          {getFieldDecorator('confirm', {\n            rules: [{\n              required: true, message: 'Please confirm your password!',\n            }, {\n              validator: this.compareToFirstPassword,\n            }],\n          })(\n            <Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"Password\" onBlur={this.handleConfirmBlur} />\n          )}\n        </FormItem>\n\n        <FormItem>\n        <Button type=\"primary\" htmlType=\"submit\" style={{marginRight: '10px'}}>\n            Signup\n        </Button>\n        Or \n        <NavLink \n            style={{marginRight: '10px'}} \n            to='/login/'> login\n        </NavLink>\n        </FormItem>\n\n      </Form>\n    );\n  }\n}\n\nconst WrappedRegistrationForm = Form.create()(RegistrationForm);\n\nconst mapStateToProps = (state) => {\n    return {\n        loading: state.loading,\n        error: state.error\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onAuth: (username, email, password1, password2) => dispatch(actions.authSignup(username, email, password1, password2)) \n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WrappedRegistrationForm);","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport BaseRouter from \"../routes\";\nimport Sidepanel from \"../containers/Sidepanel\";\nimport Profile from \"../containers/Profile\";\nimport Chat from \"../containers/Chat\";\nimport AddChatModal from \"../containers/Popup\";\nimport * as actions from \"../store/actions/auth\";\nimport * as navActions from \"../store/actions/nav\";\nimport * as messageActions from \"../store/actions/message\";\nimport WebSocketInstance from \"../websocket\";\n\n\nclass ChatHolder extends React.Component {\n  componentDidMount() {\n\n    this.props.onTryAutoSignup();\n\n    console.log(\"Params\");\n    console.log(this.props.match);\n  }\n\n  constructor(props) {\n    super(props);\n    WebSocketInstance.addCallbacks(\n      this.props.setMessages.bind(this),\n      this.props.addMessage.bind(this)\n    );\n  }\n\n  render() {\n    return (\n        <div id=\"frame\">\n          <Sidepanel />\n          <div className=\"content\">\n            <AddChatModal\n              isVisible={this.props.showAddChatPopup}\n              close={() => this.props.closeAddChatPopup()}\n            />\n          <Profile />\n          </div>\n          </div>   \n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    showAddChatPopup: state.nav.showAddChatPopup,\n    authenticated: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    closeAddChatPopup: () => dispatch(navActions.closeAddChatPopup()),\n    addMessage: message => dispatch(messageActions.addMessage(message)),\n    setMessages: messages => dispatch(messageActions.setMessages(messages))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ChatHolder);","import React from 'react';\n\nimport { Card } from 'antd';\n\n\nclass Home extends React.Component{\n\n\trender(){\n\t\treturn(\n  <div style={{ background: '#ECECEC', padding: '30px' }}>\n    <Card title=\"This is home\" bordered={false} style={{ width: 300 }}>\n      <p>Card content</p>\n      <p>Card content</p>\n      <p>Card content</p>\n    </Card>\n  </div>);\n\t}\n}\n\n\nexport default Home;","import React from \"react\";\nimport { Form, Input, Button } from \"antd\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { HOST_URL } from \"../settings\";\nconst FormItem = Form.Item;\n\n\nclass CustomForm extends React.Component {\n  \n  handleFormSubmit = async (event, requestType, profileID) => {\n    event.preventDefault();\n\n    const postObj = {\n      bio: event.target.elements.bio.value,\n      location: event.target.elements.location.value\n    }\n/*\n    axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Token ${this.props.token}`,\n    };*/\n    \n   if (requestType === \"put\") {\n      await axios.put(`${HOST_URL}/profile/${profileID}/update/`, postObj)\n        .then(res => {\n          if (res.status === 200) {\n            this.props.history.push(`/`);\n          }\n        })\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <Form\n          onSubmit={event =>\n            this.handleFormSubmit(\n              event,\n              this.props.requestType,\n              this.props.profileID\n            )\n          }\n        >\n          <FormItem label=\"Title\">\n            <Input name=\"bio\" placeholder=\"Put a title here\" />\n          </FormItem>\n          <FormItem label=\"Content\">\n            <Input name=\"location\" placeholder=\"Enter some content ...\" />\n          </FormItem>\n          <FormItem>\n            <Button type=\"primary\" htmlType=\"submit\">\n              {this.props.btnText}\n            </Button>\n          </FormItem>\n        </Form>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(CustomForm);","import React from \"react\";\nimport axios from \"axios\";\nimport CustomForm from '../components/Form';\nimport { connect } from \"react-redux\";\nimport { Button, Card } from \"antd\";\nimport * as actions from \"../store/actions/auth\";\nimport { HOST_URL } from \"../settings\";\n\n\nclass ProfilePage extends React.Component {\n   state = {\n    userprofile: {}\n\n  };\n\n  componentDidMount() {\n    const profileID = this.props.match.params.profileID;\n    console.log(profileID)\n    axios.get(`${HOST_URL}/profile/?username=${profileID}`).then(res => {\n      this.setState({\n        userprofile: res.data[0],\n      });\n      });\n  }\n \n  render() {\n   console.log(this.state.userprofile);\n    return (\n      <div>\n       <Card title={this.state.userprofile.bio}>\n          <p> {this.state.userprofile.location} </p>\n      </Card>\n       <CustomForm\n          {...this.props}\n          token={this.props.token}\n          requestType=\"put\"\n          profileID={this.state.userprofile.id}\n          btnText=\"Update\"\n        />\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(ProfilePage);","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Hoc from \"./hoc/hoc\";\nimport { connect } from \"react-redux\";\nimport Chat from \"./containers/Chat\";\nimport WrappedNormalLoginForm from './containers/Login'; \nimport WrappedNormalSignupForm from './containers/Signup';\nimport * as actions from \"./store/actions/auth\";\nimport ChatHolder from \"./containers/ChatHolder\";\nimport Home from './containers/Home';\nimport ProfilePage from './containers/Profilepage';\nclass BaseRouter extends React.Component{\n\ncomponentDidMount() {\n    this.props.onTryAutoSignup();\n  }\n\n\tconstructor(props) {\n    super(props);\n  }\n\n\trender(){\n\t\treturn( <Hoc>\n  \t<Route exact path=\"/\" component={Home} />\n  \t<Route exact path=\"/home\" component={Home} />\n  \t<Route exact path=\"/profile/:profileID/\" \n\tcomponent={ProfilePage}/>\n\t<Route exact path=\"/chat/\" component={ChatHolder} />\n  \t<Route exact path=\"/login/\" component={WrappedNormalLoginForm} />\n  \t<Route exact path=\"/signup/\" component={WrappedNormalSignupForm} />\n  \t<Route exact path=\"/chat/:chatID/\" component={Chat} />\n    </Hoc>);\n\t}\n} \n//<Route exact path=\"/\" component={ChatMenu} />\n\nconst mapStateToProps = state => {\n  return {\n    authenticated: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState())\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BaseRouter);\n  \n\n","import React from 'react';\nimport { Layout, Menu, Breadcrumb } from 'antd';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport * as actions from '../store/actions/auth';\n\nconst { Header, Content, Footer } = Layout;\n\nclass CustomLayout extends React.Component {\n    render() {\n        return (\n            <Layout className=\"layout\">\n                <Header>\n                <div className=\"logo\" />\n                <Menu\n                    theme=\"dark\"\n                    mode=\"horizontal\"\n                    defaultSelectedKeys={['2']}\n                    style={{ lineHeight: '64px' }}\n                >\n    \n                    <Menu.Item key=\"1\">\n                        <Link to=\"/\">Home</Link>\n                    </Menu.Item>\n                    \n                {\n                    this.props.authenticated &&\n                    (<Menu.Item key=\"2\" onClick={this.props.logout}>\n                        Logout\n                    </Menu.Item>)\n                }\n                    {\n                        this.props.authenticated ?\n                    <Menu.Item key=\"3\">\n                         <Link to={`/profile/${this.props.username}/`}>Profile</Link>\n                    </Menu.Item>          \n\n                    \n    \n                    :\n    \n                    <Menu.Item key=\"2\">\n                        <Link to=\"/login\">Login</Link>\n                    </Menu.Item>\n                }\n                \n                 <Menu.Item key=\"4\">\n                        <Link to=\"/chat\">Chat</Link>\n                    </Menu.Item>\n                    \n                    \n                </Menu>\n                </Header>\n                <Content style={{ padding: '0 50px' }}>\n                <Breadcrumb style={{ margin: '16px 0' }}>\n                    <Breadcrumb.Item><Link to=\"/\">Home</Link></Breadcrumb.Item>\n                    <Breadcrumb.Item><Link to=\"/\">List</Link></Breadcrumb.Item>\n                </Breadcrumb>\n                    <div style={{ background: '#fff', padding: 24, minHeight: 280 }}>\n                        {this.props.children}\n                    </div>\n                </Content>\n                <Footer style={{ textAlign: 'center' }}>\n                Ant Design ©2016 Created by Ant UED\n                </Footer>\n            </Layout>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        logout: () => dispatch(actions.logout()) \n    }\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(CustomLayout));","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport BaseRouter from \"./routes\";\nimport Sidepanel from \"./containers/Sidepanel\";\nimport Profile from \"./containers/Profile\";\nimport AddChatModal from \"./containers/Popup\";\nimport * as actions from \"./store/actions/auth\";\nimport * as navActions from \"./store/actions/nav\";\nimport * as messageActions from \"./store/actions/message\";\nimport WebSocketInstance from \"./websocket\";\n\nimport \"./assets/style.css\";\n\nimport CustomLayout from './containers/Layout';\n\nclass App extends React.Component {\n  componentDidMount() {\n    this.props.onTryAutoSignup();\n  }\n\n  constructor(props) {\n    super(props);\n    WebSocketInstance.addCallbacks(\n      this.props.setMessages.bind(this),\n      this.props.addMessage.bind(this)\n    );\n  }\n\n  render() {\n    return (\n      <Router>\n      <CustomLayout {...this.props}>\n            <BaseRouter banan='stupid'/>\n      </CustomLayout>\n    \n    \n    </Router>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    showAddChatPopup: state.nav.showAddChatPopup,\n    authenticated: state.auth.token,\n    username: state.auth.username\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    closeAddChatPopup: () => dispatch(navActions.closeAddChatPopup()),\n    addMessage: message => dispatch(messageActions.addMessage(message)),\n    setMessages: messages => dispatch(messageActions.setMessages(messages))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createStore, compose, applyMiddleware, combineReducers } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport thunk from \"redux-thunk\";\nimport \"antd/dist/antd.css\";\nimport authReducer from \"./store/reducers/auth\";\nimport navReducer from \"./store/reducers/nav\";\nimport messageReducer from \"./store/reducers/message\";\nimport App from \"./App\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nfunction configureStore() {\n  const rootReducer = combineReducers({\n    auth: authReducer,\n    nav: navReducer,\n    message: messageReducer\n  });\n\n  const store = createStore(\n    rootReducer,\n    composeEnhancers(applyMiddleware(thunk))\n  );\n\n  //   if (module.hot) {\n  //     module.hot.accept(\"./store/reducers\", () => {\n  //       const nextRootReducer = require(\"./store/reducers/auth\");\n  //       store.replaceReducer(nextRootReducer);\n  //     });\n  //   }\n\n  return store;\n}\n\nconst store = configureStore();\n\nconst app = (\n  <Provider store={store}>\n    <App />\n  </Provider>\n);\n\nReactDOM.render(app, document.getElementById(\"root\"));"],"sourceRoot":""}