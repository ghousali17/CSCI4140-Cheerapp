(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,a){e.exports=a(315)},314:function(e,t,a){},315:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),s=a.n(o),c=a(57),i=a(18),l=a(152),u=(a(174),a(98)),m=function(e,t){return Object(u.a)({},e,t)},p={token:null,username:null,error:null,loading:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return function(e,t){return m(e,{error:null,loading:!0})}(e);case"AUTH_SUCCESS":return function(e,t){return m(e,{token:t.token,username:t.username,error:null,loading:!1})}(e,t);case"AUTH_FAIL":return function(e,t){return m(e,{error:t.error,loading:!1})}(e,t);case"AUTH_LOGOUT":return function(e,t){return m(e,{token:null,username:null})}(e);default:return e}},d={showAddChatPopup:!1},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_ADD_CHAT_POPUP":return function(e,t){return m(e,{showAddChatPopup:!0})}(e);case"CLOSE_ADD_CHAT_POPUP":return function(e,t){return m(e,{showAddChatPopup:!1})}(e);default:return e}},g=a(97),b={messages:[],chats:[]},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return function(e,t){return m(e,{messages:[].concat(Object(g.a)(e.messages),[t.message])})}(e,t);case"SET_MESSAGES":return function(e,t){return m(e,{messages:t.messages.reverse()})}(e,t);case"GET_CHATS_SUCCESS":return function(e,t){return m(e,{chats:t.chats})}(e,t);default:return e}},y=a(14),v=a(16),O=a(15),k=a(41),j=a(12),C=a(17),S=a(22),w=a(55),A=function(e){return e.children},T="https://cheerapp4140.herokuapp.com/",D="wss://cheerapp4140.herokuapp.com/";var P=function(){function e(){Object(y.a)(this,e),this.callbacks={},this.socketRef=null}return Object(j.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(j.a)(e,[{key:"connect",value:function(e){var t=this,a="".concat(D,"/ws/chat/").concat(e,"/");this.socketRef=new WebSocket(a),this.socketRef.onopen=function(){console.log("WebSocket open")},this.socketRef.onmessage=function(e){t.socketNewMessage(e.data)},this.socketRef.onerror=function(e){console.log(e.message)},this.socketRef.onclose=function(){console.log("WebSocket closed let's reopen"),t.connect()}}},{key:"disconnect",value:function(){this.socketRef.close()}},{key:"socketNewMessage",value:function(e){var t=JSON.parse(e),a=t.command;0!==Object.keys(this.callbacks).length&&("messages"===a&&this.callbacks[a](t.messages),"new_message"===a&&this.callbacks[a](t.message))}},{key:"fetchMessages",value:function(e,t){this.sendMessage({command:"fetch_messages",username:e,chatId:t})}},{key:"newChatMessage",value:function(e){this.sendMessage({command:"new_message",from:e.from,message:e.content,chatId:e.chatId})}},{key:"addCallbacks",value:function(e,t){this.callbacks.messages=e,this.callbacks.new_message=t}},{key:"sendMessage",value:function(e){try{this.socketRef.send(JSON.stringify(Object(u.a)({},e)))}catch(t){console.log(t.message)}}},{key:"state",value:function(){return this.socketRef.readyState}}]),e}();P.instance=null;var N=P.getInstance(),I=a(10),_=a(316),x=a(23),M=a.n(x),U=function(e,t){return{type:"AUTH_SUCCESS",token:t,username:e}},F=function(e){return{type:"AUTH_FAIL",error:e}},H=function(){return localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}},R=function(e){return function(t){setTimeout(function(){t(H())},1e3*e)}},L=function(e,t){return function(a){a({type:"AUTH_START"}),M.a.post("".concat(T,"/rest-auth/login/"),{username:e,password:t}).then(function(t){var n=t.data.key,r=new Date((new Date).getTime()+36e5);localStorage.setItem("token",n),localStorage.setItem("username",e),localStorage.setItem("expirationDate",r),a(U(e,n)),a(R(3600))}).catch(function(e){a(F(e))})}},q=function(e,t,a,n){return function(r){r({type:"AUTH_START"}),M.a.post("".concat(T,"/rest-auth/registration/"),{username:e,email:t,password1:a,password2:n}).then(function(t){var a=t.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem("token",a),localStorage.setItem("username",e),localStorage.setItem("expirationDate",n),r(U(e,a)),r(R(3600))}).catch(function(e){r(F(e))})}},B=function(){return function(e){var t=localStorage.getItem("token"),a=localStorage.getItem("username");if(void 0===t)e(H());else{var n=new Date(localStorage.getItem("expirationDate"));n<=new Date?e(H()):(e(U(a,t)),e(R((n.getTime()-(new Date).getTime())/1e3)))}}},G=function(e){return{type:"ADD_MESSAGE",message:e}},V=function(e){return{type:"SET_MESSAGES",messages:e}},z=function(e){return{type:"GET_CHATS_SUCCESS",chats:e}},W=function(e,t){return function(a){M.a.defaults.xsrfHeaderName="X-CSRFTOKEN",M.a.defaults.xsrfCookieName="csrftoken",M.a.defaults.headers={"Content-Type":"application/json",Authorization:"Token ".concat(t)},M.a.get("".concat(T,"/chat/?username=").concat(e)).then(function(e){return a(z(e.data))})}},J=function(e){return r.a.createElement(S.c,{to:"chat".concat(e.chatURL),style:{color:"#fff"}},r.a.createElement("li",{className:"contact"},r.a.createElement("div",{className:"wrap"},r.a.createElement("span",{className:"contact-status ".concat(e.status)}),r.a.createElement("img",{src:e.picURL,alt:""}),r.a.createElement("div",{className:"meta"},r.a.createElement("p",{className:"name"},e.name)))))},X=r.a.createElement(I.a,{type:"loading",style:{fontSize:24},spin:!0}),K=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={loginForm:!0},a.changeForm=function(){a.setState({loginForm:!a.state.loginForm})},a.authenticate=function(e){e.preventDefault(),a.state.loginForm?a.props.login(e.target.username.value,e.target.password.value):a.props.signup(e.target.username.value,e.target.email.value,e.target.password.value,e.target.password2.value)},a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"waitForAuthDetails",value:function(){var e=this;setTimeout(function(){null===e.props.token||void 0===e.props.token?(console.log("waiting for authentication details..."),e.waitForAuthDetails()):e.props.getUserChats(e.props.username,e.props.token)},100)}},{key:"componentDidMount",value:function(){this.waitForAuthDetails()}},{key:"openAddChatPopup",value:function(){this.props.addChat()}},{key:"render",value:function(){var e=this,t=this.props.chats.map(function(e){return r.a.createElement(J,{key:e.id,name:"Harvey Specter",picURL:"http://emilcarlsson.se/assets/louislitt.png",status:"busy",chatURL:"/".concat(e.id)})});return r.a.createElement("div",{id:"sidepanel"},r.a.createElement("div",{id:"profile"},r.a.createElement("div",{className:"wrap"},r.a.createElement("img",{id:"profile-img",src:"http://emilcarlsson.se/assets/mikeross.png",className:"online",alt:""}),r.a.createElement("div",{id:"expanded"},this.props.loading?r.a.createElement(_.a,{indicator:X}):this.props.isAuthenticated?r.a.createElement("h1",null,this.props.userName):r.a.createElement(w.a,{to:"/"})))),r.a.createElement("div",{id:"contacts"},r.a.createElement("h1",null," Contacts"),r.a.createElement("ul",null,t)),r.a.createElement("div",{id:"bottom-bar"},r.a.createElement("button",{id:"addChat",onClick:function(){return e.openAddChatPopup()}},r.a.createElement("i",{className:"fa fa-user-plus fa-fw","aria-hidden":"true"}),r.a.createElement("span",null,"Create chat"))))}}]),t}(r.a.Component),Q=Object(i.b)(function(e){return{isAuthenticated:null!==e.auth.token,loading:e.auth.loading,token:e.auth.token,username:e.auth.username,chats:e.message.chats}},function(e){return{login:function(t,a){return e(L(t,a))},logout:function(){return e(H())},signup:function(t,a,n,r){return e(q(t,a,n,r))},addChat:function(){return e({type:"OPEN_ADD_CHAT_POPUP"})},getUserChats:function(t,a){return e(W(t,a))}}})(K),Y=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(v.a)(this,Object(O.a)(t).call(this,e))).props.onTryAutoSignup(),a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}}]),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"contact-profile"},null!==this.props.username?r.a.createElement(A,null,r.a.createElement("img",{src:"http://emilcarlsson.se/assets/harveyspecter.png",alt:""}),r.a.createElement("p",null,this.props.username),r.a.createElement("div",{className:"social-media"},r.a.createElement("i",{className:"fa fa-facebook","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-twitter","aria-hidden":"true"}),r.a.createElement("i",{className:"fa fa-instagram","aria-hidden":"true"}))):null)}}]),t}(r.a.Component),Z=Object(i.b)(function(e){return{username:e.auth.username,token:e.auth.token}},function(e){return{onTryAutoSignup:function(){return e(B())}}})(Y),$=a(322),ee=a(318),te=a(320),ae=a(46),ne=ee.a.Item;var re=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={usernames:[],error:null},a.handleChange=function(e){a.setState({usernames:e})},a.handleSubmit=function(e){var t=a.state.usernames;e.preventDefault(),a.props.form.validateFields(function(e,n){if(!e){var r=[].concat(Object(g.a)(t),[a.props.username]);M.a.defaults.xsrfHeaderName="X-CSRFTOKEN",M.a.defaults.xsrfCookieName="csrftoken",M.a.defaults.headers={"Content-Type":"application/json",Authorization:"Token ".concat(a.props.token)},M.a.post("".concat(T,"/chat/create/"),{messages:[],participants:r}).then(function(e){a.props.history.push("/".concat(e.data.id)),a.props.closeAddChatPopup(),a.props.getUserChats(a.props.username,a.props.token)}).catch(function(e){console.error(e),a.setState({error:e})})}})},a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldsError,o=t.getFieldError,s=(0,t.isFieldTouched)("userName")&&o("userName");return r.a.createElement(ee.a,{layout:"inline",onSubmit:this.handleSubmit},this.state.error?"".concat(this.state.error):null,r.a.createElement(ne,{validateStatus:s?"error":"",help:s||""},a("userName",{rules:[{required:!0,message:"Please input the username of the person you want to chat with"}]})(r.a.createElement(te.a,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:this.handleChange},[]))),r.a.createElement(ne,null,r.a.createElement(ae.a,{type:"primary",htmlType:"submit",disabled:(e=n(),Object.keys(e).some(function(t){return e[t]}))},"Start a chat")))}}]),t}(r.a.Component),oe=ee.a.create()(re),se=Object(w.e)(Object(i.b)(function(e){return{token:e.auth.token,username:e.auth.username}},function(e){return{closeAddChatPopup:function(){return e({type:"CLOSE_ADD_CHAT_POPUP"})},getUserChats:function(t,a){return e(W(t,a))}}})(oe)),ce=function(e){function t(){return Object(y.a)(this,t),Object(v.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement($.a,{centered:!0,footer:null,visible:this.props.isVisible,onCancel:this.props.close},r.a.createElement(se,null))}}]),t}(r.a.Component),ie=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(v.a)(this,Object(O.a)(t).call(this,e))).state={message:""},a.messageChangeHandler=function(e){a.setState({message:e.target.value})},a.sendMessageHandler=function(e){e.preventDefault();var t={from:a.props.username,content:a.state.message,chatId:a.props.match.params.chatID};N.newChatMessage(t),a.setState({message:""})},a.renderTimestamp=function(e){var t=Math.round(((new Date).getTime()-new Date(e).getTime())/6e4);return t<1?"just now...":t<60&&t>1?"".concat(t," minutes ago"):t<1440&&t>60?"".concat(Math.round(t/60)," hours ago"):t<44640&&t>1440?"".concat(Math.round(t/1440)," days ago"):"".concat(new Date(e))},a.renderMessages=function(e){var t=a.props.username;return e.map(function(e,n,o){return r.a.createElement("li",{key:e.id,style:{marginBottom:o.length-1===n?"300px":"15px"},className:e.author===t?"sent":"replies"},r.a.createElement("img",{src:"http://emilcarlsson.se/assets/mikeross.png",alt:"profile-pic"}),r.a.createElement("p",null,e.content,r.a.createElement("br",null),r.a.createElement("small",null,a.renderTimestamp(e.timestamp))))})},a.scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth"})},a.initialiseChat(),a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"initialiseChat",value:function(){var e=this;this.waitForSocketConnection(function(){N.fetchMessages(e.props.username,e.props.match.params.chatID)}),N.connect(this.props.match.params.chatID)}}]),Object(j.a)(t,[{key:"waitForSocketConnection",value:function(e){var t=this;setTimeout(function(){if(1===N.state())return console.log("Connection is made"),void e();console.log("wait for connection..."),t.waitForSocketConnection(e)},100)}},{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.match.params.chatID!==e.match.params.chatID&&(N.disconnect(),this.waitForSocketConnection(function(){N.fetchMessages(t.props.username,e.match.params.chatID)}),N.connect(e.match.params.chatID))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"frame"},r.a.createElement(Q,null),r.a.createElement("div",{className:"content"},r.a.createElement(ce,{isVisible:this.props.showAddChatPopup,close:function(){return e.props.closeAddChatPopup()}}),r.a.createElement(Z,this.props),r.a.createElement(A,null,r.a.createElement("div",{className:"messages"},r.a.createElement("ul",{id:"chat-log"},this.props.messages&&this.renderMessages(this.props.messages),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))),r.a.createElement("div",{className:"message-input"},r.a.createElement("form",{onSubmit:this.sendMessageHandler},r.a.createElement("div",{className:"wrap"},r.a.createElement("input",{onChange:this.messageChangeHandler,value:this.state.message,required:!0,id:"chat-message-input",type:"text",placeholder:"Write your message..."}),r.a.createElement("i",{className:"fa fa-paperclip attachment","aria-hidden":"true"}),r.a.createElement("button",{id:"chat-message-submit",className:"submit"},r.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true"}))))))))}}]),t}(r.a.Component),le=Object(i.b)(function(e){return{username:e.auth.username,messages:e.message.messages,token:e.auth.token}})(ie),ue=a(321),me=ee.a.Item,pe=r.a.createElement(I.a,{type:"loading",style:{fontSize:24},spin:!0}),he=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(a.props.onAuth(t.userName,t.password),console.log(a.props.error))})},a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=null;this.props.error&&(e=r.a.createElement("p",{color:"red"},"Invalid Username or password"));var t=this.props.form.getFieldDecorator;return this.props.isAuthenticated?r.a.createElement(w.a,{to:"/"}):r.a.createElement("div",null,e,this.props.loading?r.a.createElement(_.a,{indicator:pe}):r.a.createElement(ee.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(me,null,t("userName",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(ue.a,{prefix:r.a.createElement(I.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(me,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(ue.a,{prefix:r.a.createElement(I.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(me,null,r.a.createElement(ae.a,{type:"primary",htmlType:"submit",style:{marginRight:"10px"}},"Login"),"Or",r.a.createElement(S.c,{style:{marginRight:"10px"},to:"/signup/"}," signup"))))}}]),t}(r.a.Component),de=ee.a.create()(he),fe=Object(i.b)(function(e){return{loading:e.loading,error:e.error,isAuthenticated:e.token}},function(e){return{onAuth:function(t,a){return e(L(t,a))}}})(de),ge=ee.a.Item,be=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(a.props.onAuth(t.userName,t.email,t.password,t.confirm),a.props.history.push("/"))})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!==r.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(ee.a,{onSubmit:this.handleSubmit},r.a.createElement(ge,null,e("userName",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(ue.a,{prefix:r.a.createElement(I.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(ge,null,e("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(ue.a,{prefix:r.a.createElement(I.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"}))),r.a.createElement(ge,null,e("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(ue.a,{prefix:r.a.createElement(I.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(ge,null,e("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(ue.a,{prefix:r.a.createElement(I.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",onBlur:this.handleConfirmBlur}))),r.a.createElement(ge,null,r.a.createElement(ae.a,{type:"primary",htmlType:"submit",style:{marginRight:"10px"}},"Signup"),"Or",r.a.createElement(S.c,{style:{marginRight:"10px"},to:"/login/"}," login")))}}]),t}(r.a.Component),Ee=ee.a.create()(be),ye=Object(i.b)(function(e){return{loading:e.loading,error:e.error}},function(e){return{onAuth:function(t,a,n,r){return e(q(t,a,n,r))}}})(Ee),ve=function(e){function t(e){var a;return Object(y.a)(this,t),a=Object(v.a)(this,Object(O.a)(t).call(this,e)),N.addCallbacks(a.props.setMessages.bind(Object(k.a)(a)),a.props.addMessage.bind(Object(k.a)(a))),a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup(),console.log("Params"),console.log(this.props.match)}}]),Object(j.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"frame"},r.a.createElement(Q,null),r.a.createElement("div",{className:"content"},r.a.createElement(ce,{isVisible:this.props.showAddChatPopup,close:function(){return e.props.closeAddChatPopup()}}),r.a.createElement(Z,null)))}}]),t}(r.a.Component),Oe=Object(i.b)(function(e){return{showAddChatPopup:e.nav.showAddChatPopup,authenticated:e.auth.token}},function(e){return{onTryAutoSignup:function(){return e(B())},closeAddChatPopup:function(){return e({type:"CLOSE_ADD_CHAT_POPUP"})},addMessage:function(t){return e(G(t))},setMessages:function(t){return e(V(t))}}})(ve),ke=a(319),je=function(e){function t(){return Object(y.a)(this,t),Object(v.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{background:"#ECECEC",padding:"30px"}},r.a.createElement(ke.a,{title:"This is home",bordered:!1,style:{width:300}},r.a.createElement("p",null,"Card content"),r.a.createElement("p",null,"Card content"),r.a.createElement("p",null,"Card content")))}}]),t}(r.a.Component),Ce=a(126),Se=a.n(Ce),we=a(162),Ae=ee.a.Item,Te=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).handleFormSubmit=function(){var e=Object(we.a)(Se.a.mark(function e(t,n,r){var o;return Se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o={bio:t.target.elements.bio.value,location:t.target.elements.location.value},"put"!==n){e.next=5;break}return e.next=5,M.a.put("".concat(T,"/profile/").concat(r,"/update/"),o).then(function(e){200===e.status&&a.props.history.push("/")});case 5:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ee.a,{onSubmit:function(t){return e.handleFormSubmit(t,e.props.requestType,e.props.profileID)}},r.a.createElement(Ae,{label:"Title"},r.a.createElement(ue.a,{name:"bio",placeholder:"Put a title here"})),r.a.createElement(Ae,{label:"Content"},r.a.createElement(ue.a,{name:"location",placeholder:"Enter some content ..."})),r.a.createElement(Ae,null,r.a.createElement(ae.a,{type:"primary",htmlType:"submit"},this.props.btnText))))}}]),t}(r.a.Component),De=Object(i.b)(function(e){return{token:e.auth.token}})(Te),Pe=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).state={userprofile:{}},a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.profileID;console.log(t),M.a.get("".concat(T,"/profile/?username=").concat(t)).then(function(t){e.setState({userprofile:t.data[0]})})}},{key:"render",value:function(){return console.log(this.state.userprofile),r.a.createElement("div",null,r.a.createElement(ke.a,{title:this.state.userprofile.bio},r.a.createElement("p",null," ",this.state.userprofile.location," ")),r.a.createElement(De,Object.assign({},this.props,{token:this.props.token,requestType:"put",profileID:this.state.userprofile.id,btnText:"Update"})))}}]),t}(r.a.Component),Ne=Object(i.b)(function(e){return{token:e.auth.token}})(Pe),Ie=function(e){function t(e){return Object(y.a)(this,t),Object(v.a)(this,Object(O.a)(t).call(this,e))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}}]),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(A,null,r.a.createElement(w.b,{exact:!0,path:"/",component:je}),r.a.createElement(w.b,{exact:!0,path:"/home",component:je}),r.a.createElement(w.b,{exact:!0,path:"/profile/:profileID/",component:Ne}),r.a.createElement(w.b,{exact:!0,path:"/chat/",component:Oe}),r.a.createElement(w.b,{exact:!0,path:"/login/",component:fe}),r.a.createElement(w.b,{exact:!0,path:"/signup/",component:ye}),r.a.createElement(w.b,{exact:!0,path:"/chat/:chatID/",component:le}))}}]),t}(r.a.Component),_e=Object(i.b)(function(e){return{authenticated:e.auth.token}},function(e){return{onTryAutoSignup:function(){return e(B())}}})(Ie),xe=(a(314),a(317)),Me=a(128),Ue=a(323),Fe=xe.a.Header,He=xe.a.Content,Re=xe.a.Footer,Le=function(e){function t(){return Object(y.a)(this,t),Object(v.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(xe.a,{className:"layout"},r.a.createElement(Fe,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(Me.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],style:{lineHeight:"64px"}},r.a.createElement(Me.b.Item,{key:"1"},r.a.createElement(S.b,{to:"/"},"Home")),this.props.authenticated&&r.a.createElement(Me.b.Item,{key:"2",onClick:this.props.logout},"Logout"),this.props.authenticated?r.a.createElement(Me.b.Item,{key:"3"},r.a.createElement(S.b,{to:"/profile/".concat(this.props.username,"/")},"Profile")):r.a.createElement(Me.b.Item,{key:"2"},r.a.createElement(S.b,{to:"/login"},"Login")),r.a.createElement(Me.b.Item,{key:"4"},r.a.createElement(S.b,{to:"/chat"},"Chat")))),r.a.createElement(He,{style:{padding:"0 50px"}},r.a.createElement(Ue.a,{style:{margin:"16px 0"}},r.a.createElement(Ue.a.Item,null,r.a.createElement(S.b,{to:"/"},"Home")),r.a.createElement(Ue.a.Item,null,r.a.createElement(S.b,{to:"/"},"List"))),r.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},this.props.children)),r.a.createElement(Re,{style:{textAlign:"center"}},"Ant Design \xa92016 Created by Ant UED"))}}]),t}(r.a.Component),qe=Object(w.e)(Object(i.b)(null,function(e){return{logout:function(){return e(H())}}})(Le)),Be=function(e){function t(e){var a;return Object(y.a)(this,t),a=Object(v.a)(this,Object(O.a)(t).call(this,e)),N.addCallbacks(a.props.setMessages.bind(Object(k.a)(a)),a.props.addMessage.bind(Object(k.a)(a))),a}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}}]),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(S.a,null,r.a.createElement(qe,this.props,r.a.createElement(_e,{banan:"stupid"})))}}]),t}(r.a.Component),Ge=Object(i.b)(function(e){return{showAddChatPopup:e.nav.showAddChatPopup,authenticated:e.auth.token,username:e.auth.username}},function(e){return{onTryAutoSignup:function(){return e(B())},closeAddChatPopup:function(){return e({type:"CLOSE_ADD_CHAT_POPUP"})},addMessage:function(t){return e(G(t))},setMessages:function(t){return e(V(t))}}})(Be),Ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d;var ze=function(){var e=Object(c.c)({auth:h,nav:f,message:E});return Object(c.e)(e,Ve(Object(c.a)(l.a)))}(),We=r.a.createElement(i.a,{store:ze},r.a.createElement(Ge,null));s.a.render(We,document.getElementById("root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.f64e74bb.chunk.js.map