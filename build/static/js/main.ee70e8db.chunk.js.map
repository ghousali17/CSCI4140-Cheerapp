{"version":3,"sources":["../../../upload/CSCI4140-Cheerapp/src/store/utility.js","../../../upload/CSCI4140-Cheerapp/src/store/reducers/auth.js","../../../upload/CSCI4140-Cheerapp/src/store/actions/actionTypes.js","../../../upload/CSCI4140-Cheerapp/src/store/reducers/nav.js","../../../upload/CSCI4140-Cheerapp/src/store/reducers/message.js","../../../upload/CSCI4140-Cheerapp/src/hoc/hoc.js","../../../upload/CSCI4140-Cheerapp/src/settings.js","../../../upload/CSCI4140-Cheerapp/src/websocket.js","../../../upload/CSCI4140-Cheerapp/src/store/actions/auth.js","../../../upload/CSCI4140-Cheerapp/src/store/actions/message.js","../../../upload/CSCI4140-Cheerapp/src/components/Contact.js","../../../upload/CSCI4140-Cheerapp/src/containers/Sidepanel.js","../../../upload/CSCI4140-Cheerapp/src/store/actions/nav.js","../../../upload/CSCI4140-Cheerapp/src/containers/Profile.js","../../../upload/CSCI4140-Cheerapp/src/containers/Form.js","../../../upload/CSCI4140-Cheerapp/src/containers/Popup.js","../../../upload/CSCI4140-Cheerapp/src/containers/Chat.js","../../../upload/CSCI4140-Cheerapp/src/containers/Login.js","../../../upload/CSCI4140-Cheerapp/src/containers/Signup.js","../../../upload/CSCI4140-Cheerapp/src/containers/ChatHolder.js","../../../upload/CSCI4140-Cheerapp/src/containers/Home.js","../../../upload/CSCI4140-Cheerapp/src/components/Form.js","../../../upload/CSCI4140-Cheerapp/src/containers/Profilepage.js","../../../upload/CSCI4140-Cheerapp/src/routes.js","../../../upload/CSCI4140-Cheerapp/src/containers/Layout.js","../../../upload/CSCI4140-Cheerapp/src/App.js","../../../upload/CSCI4140-Cheerapp/src/index.js"],"names":["updateObject","oldObject","updatedProperties","Object","objectSpread","initialState","token","username","error","loading","reducer","state","arguments","length","undefined","action","type","authStart","authSuccess","authFail","authLogout","showAddChatPopup","openAddChatPopup","closeAddChatPopup","messages","chats","concat","toConsumableArray","message","addMessage","reverse","setMessages","setChats","Hoc","props","children","HOST_URL","SOCKET_URL","WebSocketService","classCallCheck","this","callbacks","socketRef","instance","chatUrl","_this","path","WebSocket","onopen","console","log","onmessage","e","socketNewMessage","data","onerror","onclose","connect","close","parsedData","JSON","parse","command","keys","chatId","sendMessage","from","content","messagesCallback","newMessageCallback","send","stringify","err","readyState","WebSocketInstance","getInstance","logout","localStorage","removeItem","checkAuthTimeout","expirationTime","dispatch","setTimeout","authLogin","password","axios","post","then","res","key","expirationDate","Date","getTime","setItem","catch","authSignup","email","password1","password2","authCheckState","getItem","getUserChatsSuccess","getUserChats","defaults","xsrfHeaderName","xsrfCookieName","headers","Content-Type","Authorization","get","Contact","react_default","a","createElement","react_router_dom","to","chatURL","style","color","className","status","src","picURL","alt","name","Sidepanel","icon","fontSize","spin","loginForm","changeForm","setState","authenticate","preventDefault","login","target","value","signup","component","waitForAuthDetails","addChat","window","location","reload","_this2","activeChats","map","c","components_Contact","id","participants","isAuthenticated","onClick","aria-hidden","getMatches","react_router","React","Component","auth","userName","actions","messageActions","Profile","possibleConstructorReturn","getPrototypeOf","call","onTryAutoSignup","hoc","FormItem","Form","Item","HorizontalAddChatForm","usernames","handleChange","handleSubmit","form","validateFields","values","combined","history","push","fieldsError","_this$props$form","getFieldDecorator","getFieldsError","getFieldError","userNameError","isFieldTouched","es_form","layout","onSubmit","validateStatus","help","rules","required","es_select","mode","width","placeholder","onChange","es_button","htmlType","disabled","some","field","AddChatForm","create","withRouter","AddChatModal","modal","centered","footer","visible","isVisible","onCancel","Chat","messageChangeHandler","event","sendMessageHandler","messageObject","match","params","chatID","newChatMessage","renderTimestamp","timestamp","timeDiff","Math","round","renderMessages","currentUser","i","arr","marginBottom","author","scrollToBottom","messagesEnd","scrollIntoView","behavior","initialiseChat","waitForSocketConnection","fetchMessages","callback","newProps","_this3","disconnect","_this4","containers_Sidepanel","Popup","containers_Profile","float","clear","ref","el","antIcon","NormalLoginForm","errorMessage","class","indicator","Login_FormItem","input","prefix","marginRight","WrappedNormalLoginForm","RegistrationForm","confirmDirty","validateFieldsAndScroll","confirm","handleConfirmBlur","compareToFirstPassword","rule","getFieldValue","validateToNextPassword","force","Signup_FormItem","validator","onBlur","WrappedRegistrationForm","ChatHolder","addCallbacks","bind","assertThisInitialized","nav","authenticated","Home","href","novalidate","CustomForm","Select","Option","handleFormSubmit","_callee","requestType","profileID","fname","lname","bio","mood","postObj","regenerator_default","wrap","_context","prev","next","profile","elements","put","stop","normFile","Array","isArray","fileList","Form_FormItem","label","defineProperty","es_radio","Group","Button","extra","upload","listType","wrapperCol","span","offset","btnText","ProfilePage","userprofile","components_Form","assign","BaseRouter","exact","WrappedNormalSignupForm","Header","Layout","Content","Footer","CustomLayout","menu","theme","defaultSelectedKeys","lineHeight","padding","textAlign","App","routes","banan","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","rootReducer","combineReducers","authReducer","navReducer","messageReducer","createStore","applyMiddleware","thunk","configureStore","app","es","src_App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ee70e8db.chunk.js","sourcesContent":["export const updateObject = (oldObject, updatedProperties) => {\n  return {\n    ...oldObject,\n    ...updatedProperties\n  };\n};\n","import * as actionTypes from \"../actions/actionTypes\";\nimport { updateObject } from \"../utility\";\n\nconst initialState = {\n  token: null,\n  username: null,\n  error: null,\n  loading: false\n};\n\nconst authStart = (state, action) => {\n  return updateObject(state, {\n    error: null,\n    loading: true\n  });\n};\n\nconst authSuccess = (state, action) => {\n  return updateObject(state, {\n    token: action.token,\n    username: action.username,\n    error: null,\n    loading: false\n  });\n};\n\nconst authFail = (state, action) => {\n  return updateObject(state, {\n    error: action.error,\n    loading: false\n  });\n};\n\nconst authLogout = (state, action) => {\n  return updateObject(state, {\n    token: null,\n    username: null\n  });\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.AUTH_START:\n      return authStart(state, action);\n    case actionTypes.AUTH_SUCCESS:\n      return authSuccess(state, action);\n    case actionTypes.AUTH_FAIL:\n      return authFail(state, action);\n    case actionTypes.AUTH_LOGOUT:\n      return authLogout(state, action);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","export const AUTH_START = \"AUTH_START\";\nexport const AUTH_SUCCESS = \"AUTH_SUCCESS\";\nexport const AUTH_FAIL = \"AUTH_FAIL\";\nexport const AUTH_LOGOUT = \"AUTH_LOGOUT\";\nexport const OPEN_ADD_CHAT_POPUP = \"OPEN_ADD_CHAT_POPUP\";\nexport const CLOSE_ADD_CHAT_POPUP = \"CLOSE_ADD_CHAT_POPUP\";\nexport const ADD_MESSAGE = \"ADD_MESSAGE\";\nexport const SET_MESSAGES = \"SET_MESSAGES\";\nexport const GET_CHATS_SUCCESS = \"GET_CHATS_SUCCESS\";\n","import * as actionTypes from \"../actions/actionTypes\";\nimport { updateObject } from \"../utility\";\n\nconst initialState = {\n  showAddChatPopup: false\n};\n\nconst openAddChatPopup = (state, action) => {\n  return updateObject(state, { showAddChatPopup: true });\n};\n\nconst closeAddChatPopup = (state, action) => {\n  return updateObject(state, { showAddChatPopup: false });\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.OPEN_ADD_CHAT_POPUP:\n      return openAddChatPopup(state, action);\n    case actionTypes.CLOSE_ADD_CHAT_POPUP:\n      return closeAddChatPopup(state, action);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import * as actionTypes from \"../actions/actionTypes\";\nimport { updateObject } from \"../utility\";\n\nconst initialState = {\n  messages: [],\n  chats: []\n};\n\nconst addMessage = (state, action) => {\n  return updateObject(state, {\n    messages: [...state.messages, action.message]\n  });\n};\n\nconst setMessages = (state, action) => {\n  return updateObject(state, {\n    messages: action.messages.reverse()\n  });\n};\n\nconst setChats = (state, action) => {\n  return updateObject(state, {\n    chats: action.chats\n  });\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.ADD_MESSAGE:\n      return addMessage(state, action);\n    case actionTypes.SET_MESSAGES:\n      return setMessages(state, action);\n    case actionTypes.GET_CHATS_SUCCESS:\n      return setChats(state, action);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","const Hoc = props => props.children;\n\nexport default Hoc;\n","let DEBUG = true;\nlet HOST_URL = \"https://cheerapp4140.herokuapp.com\";\nlet SOCKET_URL = \"ws://cheerapp4140.herokuapp.com\";\nif (DEBUG) {\n  HOST_URL = \"http://127.0.0.1:8000\";\n  SOCKET_URL = \"ws://127.0.0.1:8000\";\n}\n\nexport { HOST_URL, SOCKET_URL };\n","import { SOCKET_URL } from \"./settings\";\n\nclass WebSocketService {\n  static instance = null;\n  callbacks = {};\n\n  static getInstance() {\n    if (!WebSocketService.instance) {\n      WebSocketService.instance = new WebSocketService();\n    }\n    return WebSocketService.instance;\n  }\n\n  constructor() {\n    this.socketRef = null;\n  }\n\n  connect(chatUrl) {\n    const path = `${SOCKET_URL}/ws/chat/${chatUrl}/`;\n    this.socketRef = new WebSocket(path);\n    this.socketRef.onopen = () => {\n      console.log(\"WebSocket open\");\n    };\n    this.socketRef.onmessage = e => {\n      this.socketNewMessage(e.data);\n    };\n    this.socketRef.onerror = e => {\n      console.log(e.message);\n    };\n    this.socketRef.onclose = () => {\n      console.log(\"WebSocket closed let's reopen\");\n      this.connect();\n    };\n  }\n\n  disconnect() {\n    this.socketRef.close();\n  }\n\n  socketNewMessage(data) {\n    const parsedData = JSON.parse(data);\n    const command = parsedData.command;\n    if (Object.keys(this.callbacks).length === 0) {\n      return;\n    }\n    if (command === \"messages\") {\n      this.callbacks[command](parsedData.messages);\n    }\n    if (command === \"new_message\") {\n      this.callbacks[command](parsedData.message);\n    }\n  }\n\n  fetchMessages(username, chatId) {\n    this.sendMessage({\n      command: \"fetch_messages\",\n      username: username,\n      chatId: chatId\n    });\n  }\n\n  newChatMessage(message) {\n    this.sendMessage({\n      command: \"new_message\",\n      from: message.from,\n      message: message.content,\n      chatId: message.chatId\n    });\n  }\n\n  addCallbacks(messagesCallback, newMessageCallback) {\n    this.callbacks[\"messages\"] = messagesCallback;\n    this.callbacks[\"new_message\"] = newMessageCallback;\n  }\n\n  sendMessage(data) {\n    try {\n      this.socketRef.send(JSON.stringify({ ...data }));\n    } catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  state() {\n    return this.socketRef.readyState;\n  }\n}\n\nconst WebSocketInstance = WebSocketService.getInstance();\n\nexport default WebSocketInstance;\n","import axios from \"axios\";\nimport * as actionTypes from \"./actionTypes\";\nimport { HOST_URL } from \"../../settings\";\n\nexport const authStart = () => {\n  return {\n    type: actionTypes.AUTH_START\n  };\n};\n\nexport const authSuccess = (username, token) => {\n  return {\n    type: actionTypes.AUTH_SUCCESS,\n    token: token,\n    username: username\n  };\n};\n\nexport const authFail = error => {\n  return {\n    type: actionTypes.AUTH_FAIL,\n    error: error\n  };\n};\n\nexport const logout = () => {\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"username\");\n  localStorage.removeItem(\"expirationDate\");\n  return {\n    type: actionTypes.AUTH_LOGOUT\n  };\n};\n\nexport const checkAuthTimeout = expirationTime => {\n  return dispatch => {\n    setTimeout(() => {\n      dispatch(logout());\n    }, expirationTime * 1000);\n  };\n};\n\nexport const authLogin = (username, password) => {\n  return dispatch => {\n    dispatch(authStart());\n    axios\n      .post(`${HOST_URL}/rest-auth/login/`, {\n        username: username,\n        password: password\n      })\n      .then(res => {\n        const token = res.data.key;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"username\", username);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        dispatch(authSuccess(username, token));\n        dispatch(checkAuthTimeout(3600));\n      })\n      .catch(err => {\n        dispatch(authFail(err));\n      });\n  };\n};\n\nexport const authSignup = (username, email, password1, password2) => {\n  return dispatch => {\n    dispatch(authStart());\n    axios\n      .post(`${HOST_URL}/rest-auth/registration/`, {\n        username: username,\n        email: email,\n        password1: password1,\n        password2: password2\n      })\n      .then(res => {\n        const token = res.data.key;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"username\", username);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        dispatch(authSuccess(username, token));\n        dispatch(checkAuthTimeout(3600));\n      })\n      .catch(err => {\n        dispatch(authFail(err));\n      });\n  };\n};\n\nexport const authCheckState = () => {\n  return dispatch => {\n    const token = localStorage.getItem(\"token\");\n    const username = localStorage.getItem(\"username\");\n    if (token === undefined) {\n      dispatch(logout());\n    } else {\n      const expirationDate = new Date(localStorage.getItem(\"expirationDate\"));\n      if (expirationDate <= new Date()) {\n        dispatch(logout());\n      } else {\n        dispatch(authSuccess(username, token));\n        dispatch(\n          checkAuthTimeout(\n            (expirationDate.getTime() - new Date().getTime()) / 1000\n          )\n        );\n      }\n    }\n  };\n};\n","import axios from \"axios\";\nimport * as actionTypes from \"./actionTypes\";\nimport { HOST_URL } from \"../../settings\";\n\nexport const addMessage = message => {\n  return {\n    type: actionTypes.ADD_MESSAGE,\n    message: message\n  };\n};\n\nexport const setMessages = messages => {\n  return {\n    type: actionTypes.SET_MESSAGES,\n    messages: messages\n  };\n};\n\nconst getUserChatsSuccess = chats => {\n  return {\n    type: actionTypes.GET_CHATS_SUCCESS,\n    chats: chats\n  };\n};\n\nexport const getUserChats = (username, token) => {\n  return dispatch => {\n    axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Token ${token}`\n    };\n    axios\n      .get(`${HOST_URL}/chat/?username=${username}`)\n      .then(res => dispatch(getUserChatsSuccess(res.data)));\n  };\n};\n\nexport const getUserProfile = (token) => {\n  return dispatch => {\n    axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Token ${token}`\n    };\n    axios\n      .get(`${HOST_URL}/profile`)\n      .then(res => dispatch(getUserChatsSuccess(res.data)));\n  };\n\n\n}","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nconst Contact = props => (\n  <NavLink to={`${props.chatURL}`} style={{ color: \"#fff\" }}>\n    <li className=\"contact\">\n      <div className=\"wrap\">\n        <span className={`contact-status ${props.status}`} />\n        <img src={props.picURL} alt=\"\" />\n        <div className=\"meta\">\n          <p className=\"name\">{props.name}</p>\n          {/* <p className=\"preview\">You just got LITT up, Mike.</p> */}\n        </div>\n      </div>\n    </li>\n  </NavLink>\n);\n\nexport default Contact;\n","import React from \"react\";\nimport { Spin, Icon } from \"antd\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../store/actions/auth\";\nimport * as navActions from \"../store/actions/nav\";\nimport * as messageActions from \"../store/actions/message\";\nimport Contact from \"../components/Contact\";\nimport \"../assets/style.css\";\nimport axios from \"axios\";\nimport { HOST_URL } from \"../settings\";\nimport { Redirect } from \"react-router-dom\";\n\nconst antIcon = <Icon type=\"loading\" style={{ fontSize: 24 }} spin />;\n\nclass Sidepanel extends React.Component {\n  state = {\n    loginForm: true\n  };\n\n  waitForAuthDetails() {\n    const component = this;\n    setTimeout(function() {\n      if (\n        component.props.token !== null &&\n        component.props.token !== undefined\n      ) {\n        component.props.getUserChats(\n          component.props.username,\n          component.props.token\n        );\n        return;\n      } else {\n        console.log(\"waiting for authentication details...\");\n        component.waitForAuthDetails();\n      }\n    }, 100);\n  }\n\n  componentDidMount() {\n    this.waitForAuthDetails();\n  }\n\n  openAddChatPopup() {\n    this.props.addChat();\n  }\n  \n  getMatches(){\n    console.log('Find matches!');\n    axios.get(`${HOST_URL}/profile/matches/?username=${this.props.username}`).then(res=>{\n      window.location.reload();\n    });\n      \n  }\n\n  changeForm = () => {\n    this.setState({ loginForm: !this.state.loginForm });\n  };\n\n  authenticate = e => {\n    e.preventDefault();\n    if (this.state.loginForm) {\n      this.props.login(e.target.username.value, e.target.password.value);\n    } else {\n      this.props.signup(\n        e.target.username.value,\n        e.target.email.value,\n        e.target.password.value,\n        e.target.password2.value\n      );\n    }\n  };\n\n  render() {\n    let activeChats = this.props.chats.map(c => {\n\n      return (\n        <Contact\n          key={c.id}\n          name={ c.participants[0] == this.props.username ? c.participants[1] : c.participants[0] }\n          picURL=\"http://emilcarlsson.se/assets/louislitt.png\"\n          status=\"busy\"\n          chatURL={`/chat/${c.id}`}\n        />\n      );\n    });\n    if (!this.props.isAuthenticated){\n    return(<Redirect to=\"/\"/>);  \n    }else{\n    return (\n      <div id=\"sidepanel\">\n        <div id=\"profile\">\n          <div className=\"wrap\">\n            <img\n              id=\"profile-img\"\n              src=\"http://emilcarlsson.se/assets/mikeross.png\"\n              className=\"online\"\n              alt=\"\"\n            />\n            <p>{this.props.username}</p>   \n          </div>\n        </div>\n      \n        <div id=\"contacts\">\n          <ul>{activeChats}</ul>\n        </div>\n        <div id=\"bottom-bar\">\n          <button id=\"addChat\" onClick={() => this.openAddChatPopup()}>\n            <i className=\"fa fa-user-plus fa-fw\" aria-hidden=\"true\" />\n            <span>Create chat</span>\n          </button>\n          <button id=\"addChat\" onClick={() => this.getMatches()}>\n            <i className=\"fa fa-user-plus fa-fw\" aria-hidden=\"true\" />\n            <span>Find matches</span>\n          </button>\n        \n        </div>\n      </div>\n    );}\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null,\n    loading: state.auth.loading,\n    token: state.auth.token,\n    username: state.auth.username,\n    chats: state.message.chats\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    login: (userName, password) =>\n      dispatch(actions.authLogin(userName, password)),\n    logout: () => dispatch(actions.logout()),\n    signup: (username, email, password1, password2) =>\n      dispatch(actions.authSignup(username, email, password1, password2)),\n    addChat: () => dispatch(navActions.openAddChatPopup()),\n    getUserChats: (username, token) =>\n      dispatch(messageActions.getUserChats(username, token))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Sidepanel);","import * as actionTypes from \"./actionTypes\";\n\nexport const openAddChatPopup = () => {\n  return {\n    type: actionTypes.OPEN_ADD_CHAT_POPUP\n  };\n};\n\nexport const closeAddChatPopup = () => {\n  return {\n    type: actionTypes.CLOSE_ADD_CHAT_POPUP\n  };\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport Hoc from \"../hoc/hoc\";\nimport * as actions from \"../store/actions/auth\";\nclass Profile extends React.Component {\n  componentDidMount() {\n    this.props.onTryAutoSignup();\n  }\n  constructor(props) {\n    super(props);\n    this.props.onTryAutoSignup();\n    \n  }\n\n  render() {\n    //if (this.props.token === null) {\n      //return <Redirect to=\"/\" />;\n    //}\n    return (\n      <div className=\"contact-profile\">\n        {this.props.username !== null ? (\n          <Hoc>\n            <img src=\"http://emilcarlsson.se/assets/harveyspecter.png\" alt=\"\" />\n            <p>{this.props.username}</p>\n            <div className=\"social-media\">\n              <i className=\"fa fa-facebook\" aria-hidden=\"true\" />\n              <i className=\"fa fa-twitter\" aria-hidden=\"true\" />\n              <i className=\"fa fa-instagram\" aria-hidden=\"true\" />\n            </div>\n          </Hoc>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    username: state.auth.username,\n    token: state.auth.token\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState())\n    };\n};\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Profile);\n","import React from \"react\";\nimport { Form, Button, Select } from \"antd\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport * as navActions from \"../store/actions/nav\";\nimport * as messageActions from \"../store/actions/message\";\nimport { HOST_URL } from \"../settings\";\n\nconst FormItem = Form.Item;\n\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nclass HorizontalAddChatForm extends React.Component {\n  state = {\n    usernames: [],\n    error: null\n  };\n\n  handleChange = value => {\n    this.setState({\n      usernames: value\n    });\n  };\n\n  componentDidMount() {\n    this.props.form.validateFields();\n  }\n\n  handleSubmit = e => {\n    const { usernames } = this.state;\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        const combined = [...usernames, this.props.username];\n        axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n        axios.defaults.xsrfCookieName = \"csrftoken\";\n        axios.defaults.headers = {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${this.props.token}`\n        };\n        axios\n          .post(`${HOST_URL}/chat/create/`, {\n            messages: [],\n            participants: combined\n          })\n          .then(res => {\n            this.props.history.push(`/${res.data.id}`);\n            this.props.closeAddChatPopup();\n            this.props.getUserChats(this.props.username, this.props.token);\n          })\n          .catch(err => {\n            console.error(err);\n            this.setState({\n              error: err\n            });\n          });\n      }\n    });\n  };\n\n  render() {\n    const {\n      getFieldDecorator,\n      getFieldsError,\n      getFieldError,\n      isFieldTouched\n    } = this.props.form;\n\n    const userNameError =\n      isFieldTouched(\"userName\") && getFieldError(\"userName\");\n    return (\n      <Form layout=\"inline\" onSubmit={this.handleSubmit}>\n        {this.state.error ? `${this.state.error}` : null}\n        <FormItem\n          validateStatus={userNameError ? \"error\" : \"\"}\n          help={userNameError || \"\"}\n        >\n          {getFieldDecorator(\"userName\", {\n            rules: [\n              {\n                required: true,\n                message:\n                  \"Please input the username of the person you want to chat with\"\n              }\n            ]\n          })(\n            <Select\n              mode=\"tags\"\n              style={{ width: \"100%\" }}\n              placeholder=\"Tags Mode\"\n              onChange={this.handleChange}\n            >\n              {[]}\n            </Select>\n          )}\n        </FormItem>\n        <FormItem>\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            disabled={hasErrors(getFieldsError())}\n          >\n            Start a chat\n          </Button>\n        </FormItem>\n      </Form>\n    );\n  }\n}\n\nconst AddChatForm = Form.create()(HorizontalAddChatForm);\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token,\n    username: state.auth.username\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    closeAddChatPopup: () => dispatch(navActions.closeAddChatPopup()),\n    getUserChats: (username, token) =>\n      dispatch(messageActions.getUserChats(username, token))\n  };\n};\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(AddChatForm)\n);\n","import React from \"react\";\nimport { Modal } from \"antd\";\nimport Form from \"./Form\";\n\nclass AddChatModal extends React.Component {\n  render() {\n    return (\n      <Modal\n        centered\n        footer={null}\n        visible={this.props.isVisible}\n        onCancel={this.props.close}\n      >\n        <Form />\n      </Modal>\n    );\n  }\n}\n\nexport default AddChatModal;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport WebSocketInstance from \"../websocket\";\nimport Hoc from \"../hoc/hoc\";\nimport Sidepanel from \"../containers/Sidepanel\";\nimport Profile from \"../containers/Profile\";\nimport AddChatModal from \"../containers/Popup\";\n\nclass Chat extends React.Component {\n  state = { message: \"\" };\n\n  initialiseChat() {\n    this.waitForSocketConnection(() => {\n      WebSocketInstance.fetchMessages(\n        this.props.username,\n        this.props.match.params.chatID\n      );\n    });\n    WebSocketInstance.connect(this.props.match.params.chatID);\n  }\n\n  constructor(props) {\n    super(props);\n    this.initialiseChat();\n  }\n\n  waitForSocketConnection(callback) {\n    const component = this;\n    setTimeout(function() {\n      if (WebSocketInstance.state() === 1) {\n        console.log(\"Connection is made\");\n        callback();\n        return;\n      } else {\n        console.log(\"wait for connection...\");\n        component.waitForSocketConnection(callback);\n      }\n    }, 100);\n  }\n\n  messageChangeHandler = event => {\n    this.setState({ message: event.target.value });\n  };\n\n  sendMessageHandler = e => {\n    e.preventDefault();\n    const messageObject = {\n      from: this.props.username,\n      content: this.state.message,\n      chatId: this.props.match.params.chatID\n    };\n    WebSocketInstance.newChatMessage(messageObject);\n    this.setState({ message: \"\" });\n  };\n\n  renderTimestamp = timestamp => {\n    let prefix = \"\";\n    const timeDiff = Math.round(\n      (new Date().getTime() - new Date(timestamp).getTime()) / 60000\n    );\n    if (timeDiff < 1) {\n      // less than one minute ago\n      prefix = \"just now...\";\n    } else if (timeDiff < 60 && timeDiff > 1) {\n      // less than sixty minutes ago\n      prefix = `${timeDiff} minutes ago`;\n    } else if (timeDiff < 24 * 60 && timeDiff > 60) {\n      // less than 24 hours ago\n      prefix = `${Math.round(timeDiff / 60)} hours ago`;\n    } else if (timeDiff < 31 * 24 * 60 && timeDiff > 24 * 60) {\n      // less than 7 days ago\n      prefix = `${Math.round(timeDiff / (60 * 24))} days ago`;\n    } else {\n      prefix = `${new Date(timestamp)}`;\n    }\n    return prefix;\n  };\n\n  renderMessages = messages => {\n    const currentUser = this.props.username;\n    return messages.map((message, i, arr) => (\n      <li\n        key={message.id}\n        style={{ marginBottom: arr.length - 1 === i ? \"300px\" : \"15px\" }}\n        className={message.author === currentUser ? \"sent\" : \"replies\"}\n      >\n        <img\n          src=\"http://emilcarlsson.se/assets/mikeross.png\"\n          alt=\"profile-pic\"\n        />\n        <p>\n          {message.content}\n          <br />\n          <small>{this.renderTimestamp(message.timestamp)}</small>\n        </p>\n      </li>\n    ));\n  };\n\n  scrollToBottom = () => {\n    this.messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  componentDidMount() {\n    this.scrollToBottom();\n  }\n\n  componentDidUpdate() {\n    this.scrollToBottom();\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (this.props.match.params.chatID !== newProps.match.params.chatID) {\n      WebSocketInstance.disconnect();\n      this.waitForSocketConnection(() => {\n        WebSocketInstance.fetchMessages(\n          this.props.username,\n          newProps.match.params.chatID\n        );\n      });\n      WebSocketInstance.connect(newProps.match.params.chatID);\n    }\n  }\n\n  render() {\n    return (\n    <div id=\"frame\">\n     <Sidepanel />\n    <div className=\"content\">\n      <AddChatModal\n              isVisible={this.props.showAddChatPopup}\n              close={() => this.props.closeAddChatPopup()}\n            />\n      <Profile {...this.props} />\n      <Hoc>\n        <div className=\"messages\">\n          <ul id=\"chat-log\">\n            {this.props.messages && this.renderMessages(this.props.messages)}\n            <div\n              style={{ float: \"left\", clear: \"both\" }}\n              ref={el => {\n                this.messagesEnd = el;\n              }}\n            />\n          </ul>\n        </div>\n        <div className=\"message-input\">\n          <form onSubmit={this.sendMessageHandler}>\n            <div className=\"wrap\">\n              <input\n                onChange={this.messageChangeHandler}\n                value={this.state.message}\n                required\n                id=\"chat-message-input\"\n                type=\"text\"\n                placeholder=\"Write your message...\"\n              />\n              <i className=\"fa fa-paperclip attachment\" aria-hidden=\"true\" />\n              <button id=\"chat-message-submit\" className=\"submit\">\n                <i className=\"fa fa-paper-plane\" aria-hidden=\"true\" />\n              </button>\n            </div>\n          </form>\n        </div>\n      </Hoc>\n      </div>\n    </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    username: state.auth.username,\n    messages: state.message.messages,\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(Chat);\n","import React from 'react';\nimport { Form, Icon, Input, Button, Spin } from 'antd';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { Redirect } from \"react-router-dom\";\nimport * as actions from '../store/actions/auth';\nimport * as navActions from \"../store/actions/nav\";\nimport * as messageActions from \"../store/actions/message\";\nconst FormItem = Form.Item;\nconst antIcon = <Icon type=\"loading\" style={{ fontSize: 24 }} spin />;\n\n\n\n\n\nclass NormalLoginForm extends React.Component {\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.props.login(values.userName, values.password);\n        //this.props.history.push('/');\n      }\n    });\n  }\n   waitForAuthDetails() {\n    const component = this;\n    setTimeout(function() {\n      if (\n        component.props.token !== null &&\n        component.props.token !== undefined\n      ) {\n        component.props.getUserChats(\n          component.props.username,\n          component.props.token\n        );\n        return;\n      } else {\n        console.log(\"waiting for authentication details...\");\n        component.waitForAuthDetails();\n      }\n    }, 100);\n  }\n\n  componentDidMount() {\n    this.waitForAuthDetails();\n  }\n\n\n  render() {\n    let errorMessage = null;\n    if (this.props.error) {\n        errorMessage = (\n            <p class=\"error\"> Invalid username or password!</p>\n        );\n    }\n\n    const { getFieldDecorator } = this.props.form;\n    if(this.props.isAuthenticated){\n      return(<Redirect to=\"/\"/>);  \n    }else{\n    return (\n        <div>\n            {errorMessage}\n            {\n                this.props.loading ?\n\n                <Spin indicator={antIcon} />\n\n                :\n\n                <Form onSubmit={this.handleSubmit} className=\"login-form\">\n\n                    <FormItem>\n                    {getFieldDecorator('userName', {\n                        rules: [{ required: true, message: 'Please input your username!' }],\n                    })(\n                        <Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Username\" />\n                    )}\n                    </FormItem>\n\n                    <FormItem>\n                    {getFieldDecorator('password', {\n                        rules: [{ required: true, message: 'Please input your Password!' }],\n                    })(\n                        <Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"Password\" />\n                    )}\n                    </FormItem>\n\n                    <FormItem>\n                    <Button type=\"primary\" htmlType=\"submit\" style={{marginRight: '10px'}}>\n                        Login\n                    </Button>\n                    Or \n                    <NavLink \n                        style={{marginRight: '10px'}} \n                        to='/signup/'> signup\n                    </NavLink>\n                    </FormItem>\n                </Form>\n            }\n      </div>\n    );\n}\n  }\n}\n\nconst WrappedNormalLoginForm = Form.create()(NormalLoginForm);\n\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null,\n    loading: state.auth.loading,\n    token: state.auth.token,\n    username: state.auth.username,\n    chats: state.message.chats,\n    error: state.auth.error\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    login: (userName, password) =>\n      dispatch(actions.authLogin(userName, password)),\n    logout: () => dispatch(actions.logout()),\n    signup: (username, email, password1, password2) =>\n      dispatch(actions.authSignup(username, email, password1, password2)),\n    addChat: () => dispatch(navActions.openAddChatPopup()),\n    getUserChats: (username, token) =>\n      dispatch(messageActions.getUserChats(username, token))\n  };\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WrappedNormalLoginForm);","import React from 'react';\nimport { Form, Input, Icon, Button } from 'antd';\nimport { connect } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport * as actions from '../store/actions/auth';\nimport * as navActions from \"../store/actions/nav\";\nimport * as messageActions from \"../store/actions/message\";\nimport { Redirect } from \"react-router-dom\";\nconst FormItem = Form.Item;\n\nclass RegistrationForm extends React.Component {\n  state = {\n    confirmDirty: false,\n  };\n   \n\n  waitForAuthDetails() {\n   const component = this;\n\n    setTimeout(function() {\n      if (\n        component.props.token !== null &&\n        component.props.token !== undefined\n      ) {\n        component.props.getUserChats(\n          component.props.username,\n          component.props.token\n        );\n        return;\n      } else {\n        console.log(\"waiting for authentication details...\");\n        component.waitForAuthDetails();\n      }\n    }, 100);\n  }\n\n  componentDidMount() {\n    this.waitForAuthDetails();\n  }\n\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        this.props.signup(\n            values.userName,\n            values.email,\n            values.password,\n            values.confirm\n        );\n       \n      }\n    });\n  }\n\n  handleConfirmBlur = (e) => {\n    const value = e.target.value;\n    this.setState({ confirmDirty: this.state.confirmDirty || !!value });\n  }\n\n  compareToFirstPassword = (rule, value, callback) => {\n    const form = this.props.form;\n    if (value && value !== form.getFieldValue('password')) {\n      callback('Two passwords that you enter is inconsistent!');\n    } else {\n      callback();\n    }\n  }\n\n  validateToNextPassword = (rule, value, callback) => {\n    const form = this.props.form;\n    if (value && this.state.confirmDirty) {\n      form.validateFields(['confirm'], { force: true });\n    }\n    callback();\n  }\n\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n     let errorMessage = null;\n    if (this.props.error) {\n        errorMessage = (\n          <div>\n            <p class=\"error\"> Your password can't be too similar to your other personal information.</p>\n            <p class=\"error\">Your password must contain at least 8 characters.</p>\n            <p class=\"error\">Your password can't be entirely numeric.</p>\n           </div>\n        );\n    }\n    if(this.props.isAuthenticated){\n      return(<Redirect to=\"/\"/>);  \n    }else{\n    return  (\n    \n      <Form onSubmit={this.handleSubmit}>\n        {errorMessage}\n        <FormItem>\n            {getFieldDecorator('userName', {\n                rules: [{ required: true, message: 'Please input your username!' }],\n            })(\n                <Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Username\" />\n            )}\n        </FormItem>\n        \n        <FormItem>\n          {getFieldDecorator('email', {\n            rules: [{\n              type: 'email', message: 'The input is not valid E-mail!',\n            }, {\n              required: true, message: 'Please input your E-mail!',\n            }],\n          })(\n            <Input prefix={<Icon type=\"mail\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Email\" />\n          )}\n        </FormItem>\n\n        <FormItem>\n          {getFieldDecorator('password', {\n            rules: [{\n              required: true, message: 'Please input your password!',\n            }, {\n              validator: this.validateToNextPassword,\n            }],\n          })(\n            <Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"Password\" />\n          )}\n        </FormItem>\n\n        <FormItem>\n          {getFieldDecorator('confirm', {\n            rules: [{\n              required: true, message: 'Please confirm your password!',\n            }, {\n              validator: this.compareToFirstPassword,\n            }],\n          })(\n            <Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"Password\" onBlur={this.handleConfirmBlur} />\n          )}\n        </FormItem>\n\n        <FormItem>\n        <Button type=\"primary\" htmlType=\"submit\" style={{marginRight: '10px'}}>\n            Signup\n        </Button>\n        Or \n        <NavLink \n            style={{marginRight: '10px'}} \n            to='/login/'> login\n        </NavLink>\n        </FormItem>\n\n      </Form>\n    );}\n  }\n}\n\nconst WrappedRegistrationForm = Form.create()(RegistrationForm);\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null,\n    loading: state.auth.loading,\n    token: state.auth.token,\n    username: state.auth.username,\n    chats: state.message.chats,\n    error: state.auth.error\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    login: (userName, password) =>\n      dispatch(actions.authLogin(userName, password)),\n    logout: () => dispatch(actions.logout()),\n    signup: (username, email, password1, password2) =>\n      dispatch(actions.authSignup(username, email, password1, password2)),\n    addChat: () => dispatch(navActions.openAddChatPopup()),\n    getUserChats: (username, token) =>\n      dispatch(messageActions.getUserChats(username, token))\n  };\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WrappedRegistrationForm);","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport BaseRouter from \"../routes\";\nimport Sidepanel from \"../containers/Sidepanel\";\nimport Profile from \"../containers/Profile\";\nimport Chat from \"../containers/Chat\";\nimport AddChatModal from \"../containers/Popup\";\nimport * as actions from \"../store/actions/auth\";\nimport * as navActions from \"../store/actions/nav\";\nimport * as messageActions from \"../store/actions/message\";\nimport WebSocketInstance from \"../websocket\";\n\n\nclass ChatHolder extends React.Component {\n  componentDidMount() {\n\n    this.props.onTryAutoSignup();\n\n    console.log(\"Params\");\n    console.log(this.props.match);\n  }\n\n  constructor(props) {\n    super(props);\n    WebSocketInstance.addCallbacks(\n      this.props.setMessages.bind(this),\n      this.props.addMessage.bind(this)\n    );\n  }\n\n  render() {\n    return (\n        <div id=\"frame\">\n          <Sidepanel />\n          <div className=\"content\">\n            <AddChatModal\n              isVisible={this.props.showAddChatPopup}\n              close={() => this.props.closeAddChatPopup()}\n            />\n          <Profile />\n          </div>\n          </div>   \n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    showAddChatPopup: state.nav.showAddChatPopup,\n    authenticated: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    closeAddChatPopup: () => dispatch(navActions.closeAddChatPopup()),\n    addMessage: message => dispatch(messageActions.addMessage(message)),\n    setMessages: messages => dispatch(messageActions.setMessages(messages))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ChatHolder);","import React from 'react';\n\nimport { Card } from 'antd';\n\n\nclass Home extends React.Component{\n\n\trender(){\n\t\treturn(\n  <div class=\"home-container\">\n   <header id=\"header\">\n  <div class=\"intro\">\n    <div class=\"overlay\">\n      <div class=\"container\">\n        <div class=\"row\">\n          <div class=\"col-md-8 col-md-offset-2 intro-text\">\n            <h1>Welcome Back Home</h1>\n            <p>CHEERAPP! CHEER UP!</p>\n            <a href=\"#about\" class=\"btn btn-custom btn-lg page-scroll\">Learn More</a> </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</header>\n<div id=\"get-touch\">\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-xs-12 col-md-6 col-md-offset-1\">\n        <h3>Wanna to get started?</h3>\n        <p>Sign up without leaving your personal information in 1 minute!</p>\n      </div>\n      <div class=\"col-xs-12 col-md-4 text-center\"><a href=\"#signUp\" class=\"btn btn-custom btn-lg page-scroll\">Free Sign Up</a></div>\n    </div>\n  </div>\n</div>\n<div id=\"about\">\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-xs-12 col-md-6\"> <img src=\"img/about.jpg\" class=\"img-responsive\" alt=\"\"/> </div>\n      <div class=\"col-xs-12 col-md-6\">\n        <div class=\"about-text\">\n          <h2>About</h2>\n          <h3>What is it?</h3>\n          <div class=\"list-style\">\n            \n            <p>The main purpose of the application is to provide a platform for people who are willing to share their oppression and respectively for those who want to bring their personal and cultural experience into practice while having a conversation with a person in need. With the hope that we might find a “soulmate” for every user of our website, the aim is to diminish the differences between people in the virtual world and let personalities match each other instead of appearances. As a result, we hope that users will realise the value of being yourself and expressing your mind rather than keep following some social norms concerning, for instance, what beauty means, what might be successful and who should become a role model for the rest of the society. Furthermore, Cheerapp is expected to help people who struggle from loneliness or cannot get rid of the thought that somehow they are not able to blend in with the crowd. Eventually, we seize the opportunity that people who deny to use social networks due to fake personalities and faces might give a chance to an innovative and non-binding chatroom.</p>\n            \n          <h3>Who we are?</h3>\n          \n            <p>We are a group of students who need to do an open source project for CSCI4140. We are experienced on writing dynamic websites and concerning about students mental health.</p>\n\n            \n\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div id=\"instruction\">\n  <div class=\"container\">\n    <div class=\"section-title\">\n      <h2>Step By Step Guide</h2>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-4\">\n        \n        <div class=\"service-desc\">\n          <h3>1. Sign In</h3>\n          <p>Click the <a href=\"#page-top\">sign in</a> button on the top.</p>\n        </div>\n      </div>\n      <div class=\"col-md-4\">\n\n        <div class=\"service-desc\">\n          <h3>2. Select the role</h3>\n          <p>Select the role that you want to be this time. You can be either a \"listener\" to listen others stories, a \"speaker\" to share something that you want or \"Why not both?\". You can change your role anytime you want.</p>\n        </div>\n      </div>\n      <div class=\"col-md-4\">\n        <div class=\"service-desc\">\n          <h3>3. Pair up & Chat</h3>\n          <p>Our system will pair up a person that fulfill your requirments (only the role and the language that you choose) automatically. It may take a few seconds for pairing up process. After the pairing, you will enter the chatroom. You can chat with your partner!</p>\n        </div>\n      </div>\n    </div>\n   \n      </div>\n    </div>\n    <div id=\"signUp\" class=\"hideAfterSignIn\">\n  <div class=\"container\">\n    <div class=\"col-md-8\">\n      <div class=\"row\">\n        <div class=\"section-title\">\n          <h2>Visit Us</h2>\n          </div>\n        <form name=\"sentMessage\" id=\"contactForm\" novalidate>\n          <div class=\"row\">\n            <div class=\"col-md-6\">\n              \n            </div>\n            <div class=\"col-md-6\">\n              \n            </div>\n          </div>\n         \n          <div id=\"success\"></div>\n         \n        </form>\n      </div>\n    </div>\n    <div class=\"col-md-3 col-md-offset-1 contact-info\">\n      <div class=\"contact-item\">\n        <h4>Contact Info</h4>\n        <p><span>Address</span>Room 123, Ho Sin Hang Engineering Building, <br/>\n          The Chinese University of Hong Kong,<br/>\n          Shatin, Hong Kong.<br/>\n          </p>\n      </div>\n      <div class=\"contact-item\">\n        <p><span>Phone</span> +852 3943 7999</p>\n      </div>\n      <div class=\"contact-item\">\n        <p><span>Email</span> johnchan@link.cuhk.edu.hk</p>\n      </div>\n    </div>\n    <div class=\"col-md-12\">\n      <div class=\"row\">\n        <div class=\"social\">\n          <ul>\n            <li>I hate social media.</li>\n            <li><a href=\"#page-top\" class=\"page-scroll\"><i class=\"fa fa-facebook\"></i></a></li>\n            <li><a href=\"#page-top\" class=\"page-scroll\"><i class=\"fa fa-twitter\"></i></a></li>\n            <li><a href=\"#page-top\" class=\"page-scroll\"><i class=\"fa fa-google-plus\"></i></a></li>\n            <li><a href=\"#page-top\" class=\"page-scroll\"><i class=\"fa fa-youtube\"></i></a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n  </div>);\n\t}\n}\n\n\nexport default Home;","import React from \"react\";\nimport {\n  Form,\n  Select,\n  InputNumber,\n  Switch,\n  Radio,\n  Slider,\n  Button,\n  Upload,\n  Icon,\n  Rate,\n  Checkbox,\n  Row,\n  Col,\n  Input\n} from 'antd';\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { HOST_URL } from \"../settings\";\nconst FormItem = Form.Item;\n\n\nconst { Option } = Select;\n\n\nclass CustomForm extends React.Component {\n  \n  handleFormSubmit = async (event, requestType, profileID) => {\n    event.preventDefault();\n\n    var fname = this.props.profile.fname;\n    var lname = this.props.profile.lname;\n    var bio = this.props.profile.bio;\n    var location = this.props.profile.location;\n    var mood = this.props.profile.mood;\n    \n    if (event.target.elements.fname.value !== \"\")\n    {\n        fname = event.target.elements.fname.value;\n    }\n    if (event.target.elements.lname.value !== \"\")\n    {\n        lname = event.target.elements.lname.value;\n    }\n    if (event.target.elements.bio.value !== \"\")\n    {\n        bio = event.target.elements.bio.value;\n    }\n    if (event.target.elements.location.value !== \"\")\n    {\n        location = event.target.elements.location.value;\n    }\n    if (event.target.elements.mood.value !== \"\")\n    {\n        mood = event.target.elements.mood.value;\n    }\n\n    const postObj = {\n      fname: fname,\n      lname:lname,\n      bio: bio,\n      location: location,\n      mood: mood\n    }\n\n\n   if (requestType === \"put\") {\n      await axios.put(`${HOST_URL}/profile/${profileID}/update/`, postObj)\n        .then(res => {\n          if (res.status === 200) {\n            this.props.history.push(`/`);\n          }\n        })\n    }\n  }\n\n  normFile = e => {\n    console.log('Upload event:', e);\n    if (Array.isArray(e)) {\n      return e;\n    }\n    return e && e.fileList;\n  }\n\n\n  render() {\n   \n    const formItemLayout = {\n      labelCol: { span: 6 },\n      wrapperCol: { span: 14 },\n    };\n    return (\n       <Form\n          onSubmit={event =>\n            this.handleFormSubmit(\n              event,\n              this.props.requestType,\n              this.props.profileID\n            )\n          }\n        >\n         <FormItem label=\"First Name\" >\n            <Input name=\"fname\" placeholder=\"Enter your first name\" placeholder={this.props.profile.fname} />\n          </FormItem>\n          <FormItem label=\"Last name\">\n            <Input name=\"lname\" placeholder=\"Enter your last name\" placeholder={this.props.profile.lname}/>\n          </FormItem>\n          <FormItem label=\"Bio\">\n            <Input name=\"bio\" placeholder=\"Write a short personal bio\" placeholder={this.props.profile.bio}/>\n          </FormItem>\n          <FormItem label=\"City\">\n            <Input name=\"location\" placeholder=\"Enter the name of your city\" placeholder={this.props.profile.location} />\n          </FormItem>\n       \n        <Form.Item label=\"How are you feeling today?\" >\n            <Radio.Group name=\"mood\" placeholder = {this.props.profile.mood}>\n              <Radio.Button value=\"listener\">I want to listen</Radio.Button>\n              <Radio.Button value=\"sharer\">I want to share</Radio.Button>\n              <Radio.Button value=\"neutral\">Surprise me</Radio.Button>\n            </Radio.Group>\n        </Form.Item>\n\n        <Form.Item label=\"Upload\" extra=\"longgggggggggggggggggggggggggggggggggg\">\n            <Upload name=\"logo\" action=\"/upload.do\" listType=\"picture\">\n              <Button>\n                <Icon type=\"upload\" /> Click to upload\n              </Button>\n            </Upload>\n        </Form.Item>\n\n        \n        <Form.Item wrapperCol={{ span: 12, offset: 6 }}>\n          <Button type=\"primary\" htmlType=\"submit\">\n            {this.props.btnText}\n          </Button>\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(CustomForm);\n\n\n\n","import React from \"react\";\nimport axios from \"axios\";\nimport CustomForm from '../components/Form';\nimport { connect } from \"react-redux\";\nimport { Button, Card } from \"antd\";\nimport * as actions from \"../store/actions/auth\";\nimport { HOST_URL } from \"../settings\";\n\n\nclass ProfilePage extends React.Component {\n   state = {\n    userprofile: {}\n\n  };\n\n  componentDidMount() {\n    const profileID = this.props.match.params.profileID;\n    console.log(profileID)\n    axios.get(`${HOST_URL}/profile/?username=${profileID}`).then(res => {\n      this.setState({\n        userprofile: res.data[0],\n      });\n      });\n  }\n \n  render() {\n   console.log(this.state.userprofile);\n    return (\n      <div>\n      <div class=\"profile\">\n      </div>\n\n       <CustomForm class=\"updateform\"\n          form = { {name: 'validate_other'} }\n          profile = {this.state.userprofile}\n          {...this.props}\n          token={this.props.token}\n          requestType=\"put\"\n          profileID={this.state.userprofile.id}\n          btnText=\"Update\"\n        />\n      </div>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(ProfilePage);","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport Hoc from \"./hoc/hoc\";\nimport { connect } from \"react-redux\";\nimport Chat from \"./containers/Chat\";\nimport WrappedNormalLoginForm from './containers/Login'; \nimport WrappedNormalSignupForm from './containers/Signup';\nimport * as actions from \"./store/actions/auth\";\nimport ChatHolder from \"./containers/ChatHolder\";\nimport Home from './containers/Home';\nimport ProfilePage from './containers/Profilepage';\nclass BaseRouter extends React.Component{\n\ncomponentDidMount() {\n    this.props.onTryAutoSignup();\n  }\n\n\tconstructor(props) {\n    super(props);\n  }\n\n\trender(){\n\t\treturn( <Hoc>\n  \t<Route exact path=\"/\" component={Home} />\n  \t<Route exact path=\"/home\" component={Home} />\n  \t<Route exact path=\"/profile/:profileID/\" \n\tcomponent={ProfilePage}/>\n\t<Route exact path=\"/chat/\" component={ChatHolder} />\n  \t<Route exact path=\"/login/\" component={WrappedNormalLoginForm} />\n  \t<Route exact path=\"/signup/\" component={WrappedNormalSignupForm} />\n  \t<Route exact path=\"/chat/:chatID/\" component={Chat} />\n    </Hoc>);\n\t}\n} \n//<Route exact path=\"/\" component={ChatMenu} />\n\nconst mapStateToProps = state => {\n  return {\n    authenticated: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState())\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BaseRouter);\n  \n\n","import React from 'react';\nimport { Layout, Menu, Breadcrumb } from 'antd';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport * as actions from '../store/actions/auth';\n\nconst { Header, Content, Footer } = Layout;\n\nclass CustomLayout extends React.Component {\n    render() {\n        return (\n            <Layout className=\"layout\">\n                <Header>\n                <div className=\"logo\" />\n                <Menu\n                    theme=\"dark\"\n                    mode=\"horizontal\"\n                    defaultSelectedKeys={['2']}\n                    style={{ lineHeight: '64px' }}\n                >\n    \n                    <Menu.Item key=\"1\">\n                         <Link  to=\"/#page-top\">Home</Link>\n                    </Menu.Item>\n                    <Menu.Item key=\"2\">\n                        <Link  to=\"/#about\">About</Link>\n                    </Menu.Item>\n                    <Menu.Item key=\"3\">\n                         <Link  to=\"/#signUp\">Contact</Link>\n                    </Menu.Item>\n                    \n                \n                    {\n                        this.props.authenticated ?\n                    <Menu.Item key=\"4\">\n                         <Link to={`/profile/${this.props.username}/`}>Profile</Link>\n                    </Menu.Item>             \n                    :\n                    <Menu.Item key=\"4\">\n                        <Link to=\"/login\">Login</Link>\n                    </Menu.Item>\n                }\n                {\n                    this.props.authenticated ?\n                    (<Menu.Item key=\"5\" onClick={this.props.logout}>\n                        Logout\n                    </Menu.Item>):\n                    <Menu.Item key=\"5\">\n                        <Link to=\"/signup\">signup</Link>\n                    </Menu.Item>\n\n                }\n                {\n                    this.props.authenticated &&\n                    ( <Menu.Item key=\"6\">\n                        <Link to=\"/chat\">Chat</Link>\n                    </Menu.Item>\n                    )\n                }\n                \n                    \n                    \n                </Menu>\n                </Header>\n                <Content style={{ padding: '0 0px' }}>\n                    <div >\n                        {this.props.children}\n                    </div>\n                </Content>\n                <Footer style={{ textAlign: 'center' }}>\n                Ant Design ©2016 Created by Ant UED\n                </Footer>\n            </Layout>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        logout: () => dispatch(actions.logout()) \n    }\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(CustomLayout));","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport BaseRouter from \"./routes\";\nimport Sidepanel from \"./containers/Sidepanel\";\nimport Profile from \"./containers/Profile\";\nimport AddChatModal from \"./containers/Popup\";\nimport * as actions from \"./store/actions/auth\";\nimport * as navActions from \"./store/actions/nav\";\nimport * as messageActions from \"./store/actions/message\";\nimport WebSocketInstance from \"./websocket\";\n\n\nimport \"./assets/style.css\";\n\nimport 'antd/dist/antd.css'\nimport CustomLayout from './containers/Layout';\n\nclass App extends React.Component {\n  componentDidMount() {\n    this.props.onTryAutoSignup();\n  }\n\n  constructor(props) {\n    super(props);\n    WebSocketInstance.addCallbacks(\n      this.props.setMessages.bind(this),\n      this.props.addMessage.bind(this)\n    );\n  }\n\n  render() {\n    return (\n      <Router>\n      <CustomLayout {...this.props}>\n            <BaseRouter banan='stupid'/>\n      </CustomLayout>\n    \n    \n    </Router>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    showAddChatPopup: state.nav.showAddChatPopup,\n    authenticated: state.auth.token,\n    username: state.auth.username\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    closeAddChatPopup: () => dispatch(navActions.closeAddChatPopup()),\n    addMessage: message => dispatch(messageActions.addMessage(message)),\n    setMessages: messages => dispatch(messageActions.setMessages(messages))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createStore, compose, applyMiddleware, combineReducers } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport thunk from \"redux-thunk\";\nimport \"antd/dist/antd.css\";\nimport authReducer from \"./store/reducers/auth\";\nimport navReducer from \"./store/reducers/nav\";\nimport messageReducer from \"./store/reducers/message\";\nimport App from \"./App\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nfunction configureStore() {\n  const rootReducer = combineReducers({\n    auth: authReducer,\n    nav: navReducer,\n    message: messageReducer\n  });\n\n  const store = createStore(\n    rootReducer,\n    composeEnhancers(applyMiddleware(thunk))\n  );\n\n  //   if (module.hot) {\n  //     module.hot.accept(\"./store/reducers\", () => {\n  //       const nextRootReducer = require(\"./store/reducers/auth\");\n  //       store.replaceReducer(nextRootReducer);\n  //     });\n  //   }\n\n  return store;\n}\n\nconst store = configureStore();\n\nconst app = (\n  <Provider store={store}>\n    <App />\n  </Provider>\n);\n\nReactDOM.render(app, document.getElementById(\"root\"));"],"sourceRoot":""}